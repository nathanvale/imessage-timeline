"use strict";(globalThis.webpackChunkwebsite=globalThis.webpackChunkwebsite||[]).push([[9615],{5705:(e,n,i)=>{i.d(n,{R:()=>a,x:()=>d});var s=i(7701);const l={},r=s.createContext(l);function a(e){const n=s.useContext(r);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:a(e.components),s.createElement(r.Provider,{value:n},e.children)}},9492:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>c,contentTitle:()=>d,default:()=>h,frontMatter:()=>a,metadata:()=>s,toc:()=>t});const s=JSON.parse('{"id":"dependency-maintenance","title":"dependency-maintenance","description":"Dependency & Maintenance Guide","source":"@site/docs/dependency-maintenance.md","sourceDirName":".","slug":"/dependency-maintenance","permalink":"/imessage-timeline/docs/dependency-maintenance","draft":false,"unlisted":false,"editUrl":"https://github.com/nathanvale/imessage-timeline/tree/main/website/docs/dependency-maintenance.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"config-best-practices-review","permalink":"/imessage-timeline/docs/config-best-practices-review"},"next":{"title":"Pre-Mode Workflow (Simple Visual)","permalink":"/imessage-timeline/docs/diagrams/pre-mode-workflow-simple"}}');var l=i(6801),r=i(5705);const a={},d=void 0,c={},t=[{value:"Dependency &amp; Maintenance Guide",id:"dependency--maintenance-guide",level:2},{value:"What\u2019s automated today",id:"whats-automated-today",level:3},{value:"Manual maintenance (as needed)",id:"manual-maintenance-as-needed",level:3},{value:"Pull request workflow",id:"pull-request-workflow",level:3},{value:"Security remediation playbook",id:"security-remediation-playbook",level:3},{value:"Node and tooling policy",id:"node-and-tooling-policy",level:3},{value:"Quick reference commands",id:"quick-reference-commands",level:3},{value:"Renovate Quickstart",id:"renovate-quickstart",level:3},{value:"FAQ",id:"faq",level:3}];function o(e){const n={code:"code",h2:"h2",h3:"h3",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,r.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.h2,{id:"dependency--maintenance-guide",children:"Dependency & Maintenance Guide"}),"\n",(0,l.jsx)(n.p,{children:"This document explains how we keep dependencies up to date and the project\nhealthy over time. It covers what\u2019s automated, what to do manually, and how to\nrespond to security events."}),"\n",(0,l.jsx)(n.h3,{id:"whats-automated-today",children:"What\u2019s automated today"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"Renovate weekly maintenance"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["Groups related updates (devDependencies, runtime deps, vitest, eslint) via\n",(0,l.jsx)(n.code,{children:"renovate.json"})," rules."]}),"\n",(0,l.jsx)(n.li,{children:"Auto-merges safe minor/patch devDependency updates (lockfile + manifest\nonly)."}),"\n",(0,l.jsx)(n.li,{children:"Lockfile maintenance runs early Monday (UTC) to keep resolution fresh."}),"\n",(0,l.jsxs)(n.li,{children:["Location: ",(0,l.jsx)(n.code,{children:".github/renovate.json"})," (ensure the GitHub Renovate app is\ninstalled)."]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"GitHub Actions updates"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["Renovate also handles workflow action version bumps under the\n",(0,l.jsx)(n.code,{children:"github-actions"})," manager."]}),"\n",(0,l.jsxs)(n.li,{children:["Commit prefix semantic: ",(0,l.jsx)(n.code,{children:"chore(gha): \u2026"})," via packageRules."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:"-- PR gating and security scanning"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"Dependency Review blocks risky new dependencies in PRs (severity \u2265 moderate by\ndefault)."}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"OSV Scanner / security workflow detects newly disclosed CVEs."}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"Locations:"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:".github/workflows/dependency-review.yml"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:".github/workflows/security.yml"})}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"Package hygiene checks"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Publint + AreTheTypesWrong run in CI to ensure publish metadata and types\nare correct."}),"\n",(0,l.jsxs)(n.li,{children:["Location: ",(0,l.jsx)(n.code,{children:".github/workflows/package-hygiene.yml"})," and\n",(0,l.jsx)(n.code,{children:"docs/package-hygiene.md"})]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"Provenance and SBOM on release"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Releases publish with npm OIDC provenance and produce a CycloneDX SBOM\nartifact."}),"\n",(0,l.jsxs)(n.li,{children:["Location: ",(0,l.jsx)(n.code,{children:".github/workflows/release.yml"})," and\n",(0,l.jsx)(n.code,{children:"docs/security-supply-chain.md"})]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"manual-maintenance-as-needed",children:"Manual maintenance (as needed)"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"Inspect available updates"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["Outdated overview: ",(0,l.jsx)(n.code,{children:"pnpm outdated"})]}),"\n",(0,l.jsxs)(n.li,{children:["Why a package is included: ",(0,l.jsx)(n.code,{children:"pnpm why <name>"})]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"Perform safe upgrades locally"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["Interactive constrained update: ",(0,l.jsx)(n.code,{children:"pnpm up -Lri"})]}),"\n",(0,l.jsxs)(n.li,{children:["Full latest (be cautious): ",(0,l.jsx)(n.code,{children:"pnpm up --latest"})]}),"\n",(0,l.jsxs)(n.li,{children:["After upgrading: run tests and package checks","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"pnpm test"})}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"pnpm coverage"})," (optional)"]}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"pnpm hygiene"})}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"Audit vulnerabilities"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["Quick scan: ",(0,l.jsx)(n.code,{children:"pnpm audit"})," (triage, link to advisories)"]}),"\n",(0,l.jsx)(n.li,{children:"If transitive: prefer upgrading the top-level maintainer package first"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"pull-request-workflow",children:"Pull request workflow"}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsxs)(n.li,{children:["For devDependencies: Dependabot PRs labeled ",(0,l.jsx)(n.code,{children:"dev-dependencies"})," will\nauto-merge after CI and scope checks."]}),"\n",(0,l.jsxs)(n.li,{children:["For direct/runtime deps: Review carefully, ensure tests are green, and add a\nChangeset entry as needed (e.g., ",(0,l.jsx)(n.code,{children:"fix:"})," for security patches, ",(0,l.jsx)(n.code,{children:"chore:"})," for\nroutine bumps)."]}),"\n",(0,l.jsx)(n.li,{children:"If Dependency Review flags a risk, either upgrade to a safe version or\ndocument a temporary mitigation and open a tracking issue."}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"security-remediation-playbook",children:"Security remediation playbook"}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsx)(n.li,{children:"OSV alerts or Dependabot security notifications surface a CVE."}),"\n",(0,l.jsxs)(n.li,{children:["Confirm impact with ",(0,l.jsx)(n.code,{children:"pnpm why"})," and the SBOM artifact from the latest release."]}),"\n",(0,l.jsx)(n.li,{children:"Identify the minimal upgrade path (patch/minor preferred). Update and open a\nPR with a Changeset."}),"\n",(0,l.jsxs)(n.li,{children:["If no fix exists, consider pinning, patching (e.g., ",(0,l.jsx)(n.code,{children:"patch-package"}),"), or\ntemporary deny policies; document in the PR."]}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"node-and-tooling-policy",children:"Node and tooling policy"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["Engines: ",(0,l.jsx)(n.code,{children:"package.json"})," specifies the supported Node range. Keep local Node\naligned with ",(0,l.jsx)(n.code,{children:"engines.node"})," for consistent CI parity."]}),"\n",(0,l.jsxs)(n.li,{children:["Package manager: We standardize on ",(0,l.jsx)(n.code,{children:"pnpm"})," (lockfile is authoritative)."]}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"quick-reference-commands",children:"Quick reference commands"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"# List available updates\npnpm outdated\n\n# Interactive minor/patch updates, with prompts\npnpm up -Lri\n\n# Run tests and coverage\npnpm test\npnpm coverage\n\n# Package hygiene checks (publint + types)\npnpm hygiene\n\n# Vulnerability scan\npnpm audit\n"})}),"\n",(0,l.jsx)(n.h3,{id:"renovate-quickstart",children:"Renovate Quickstart"}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsx)(n.li,{children:"Install the Renovate GitHub App (organization level) if not already active."}),"\n",(0,l.jsxs)(n.li,{children:["Review grouping rules in ",(0,l.jsx)(n.code,{children:".github/renovate.json"}),":","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["Dev minor/patch auto-merge (",(0,l.jsx)(n.code,{children:"devDependencies (minor/patch)"})," group)."]}),"\n",(0,l.jsxs)(n.li,{children:["Runtime deps grouped separately (manual review, semantic commit prefix\n",(0,l.jsx)(n.code,{children:"chore(deps):"}),")."]}),"\n",(0,l.jsx)(n.li,{children:"Tooling bundles (eslint, vitest) for coherent updates."}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.li,{children:"For a one-off refresh outside schedule: trigger Renovate by closing/reopening\na stale PR or using the dashboard (if enabled)."}),"\n",(0,l.jsxs)(n.li,{children:["Override behavior per-package with inline ",(0,l.jsx)(n.code,{children:"packageRules"})," additions (e.g.,\npinning, separate major group)."]}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"faq",children:"FAQ"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["Why Renovate over Dependabot?","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Advanced grouping, custom schedules, pnpm lockfile maintenance, semantic\ncommit prefixes, and auto-merge logic are centralized."}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["How are auto-merges restricted?","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Only dev minor/patch updates meeting branch status and file-change\nconstraints; major bumps always require manual review."}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["How do I force a rebase or refresh?","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["Comment ",(0,l.jsx)(n.code,{children:"@renovate rebase"})," on the PR or use the Renovate dashboard."]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["Where do security results show up?","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"GitHub Security tab and failing PR checks (Dependency Review + OSV\nworkflow)."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsxs)(n.p,{children:["For changes to cadence or policy, update ",(0,l.jsx)(n.code,{children:".github/renovate.json"})," and related\nworkflows, then reflect the change here."]})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,l.jsx)(n,{...e,children:(0,l.jsx)(o,{...e})}):o(e)}}}]);