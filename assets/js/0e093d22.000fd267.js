"use strict";(globalThis.webpackChunkwebsite=globalThis.webpackChunkwebsite||[]).push([[1238],{2067:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>c,contentTitle:()=>a,default:()=>h,frontMatter:()=>l,metadata:()=>i,toc:()=>d});const i=JSON.parse('{"id":"imessage-pipeline-tasks","title":"iMessage Pipeline Implementation Tasks","description":"Comprehensive task breakdown from imessage-pipeline-tech-spec.md","source":"@site/docs/imessage-pipeline-tasks.md","sourceDirName":".","slug":"/imessage-pipeline-tasks","permalink":"/imessage-timeline/docs/imessage-pipeline-tasks","draft":false,"unlisted":false,"editUrl":"https://github.com/nathanvale/imessage-timeline/tree/main/website/docs/imessage-pipeline-tasks.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"iMessage pipeline refactor report","permalink":"/imessage-timeline/docs/imessage-pipeline-refactor-report"},"next":{"title":"iMessage pipeline \u2014 technical specification","permalink":"/imessage-timeline/docs/imessage-pipeline-tech-spec"}}');var t=n(6801),r=n(5705);const l={},a="iMessage Pipeline Implementation Tasks",c={},d=[{value:"Task Status Legend",id:"task-status-legend",level:2},{value:"Epic Overview",id:"epic-overview",level:2},{value:"E1: Schema &amp; Validator (Foundation)",id:"e1-schema--validator-foundation",level:2},{value:"SCHEMA--T01: Create unified Message schema with Zod validation",id:"schema--t01-create-unified-message-schema-with-zod-validation",level:3},{value:"SCHEMA--T02: Build validator CLI script",id:"schema--t02-build-validator-cli-script",level:3},{value:"SCHEMA--T03: Create fixtures and schema tests",id:"schema--t03-create-fixtures-and-schema-tests",level:3},{value:"E2: Normalize-Link (Data Integration)",id:"e2-normalize-link-data-integration",level:2},{value:"NORMALIZE--T01: Implement CSV to schema mapping",id:"normalize--t01-implement-csv-to-schema-mapping",level:3},{value:"NORMALIZE--T02: Implement DB row splitting with part GUIDs",id:"normalize--t02-implement-db-row-splitting-with-part-guids",level:3},{value:"NORMALIZE--T03: Implement reply and tapback linking \u26a0\ufe0f HIGH RISK",id:"normalize--t03-implement-reply-and-tapback-linking-\ufe0f-high-risk",level:3},{value:"NORMALIZE--T04: Implement deduplication across sources \u26a0\ufe0f HIGH RISK",id:"normalize--t04-implement-deduplication-across-sources-\ufe0f-high-risk",level:3},{value:"NORMALIZE--T05: Implement absolute path enforcement",id:"normalize--t05-implement-absolute-path-enforcement",level:3},{value:"NORMALIZE--T06: Build date validator and converters \u26a0\ufe0f HIGH RISK",id:"normalize--t06-build-date-validator-and-converters-\ufe0f-high-risk",level:3},{value:"NORMALIZE--T07: Add Zod validation layer",id:"normalize--t07-add-zod-validation-layer",level:3},{value:"NORMALIZE--T08: Create normalize-link test suite",id:"normalize--t08-create-normalize-link-test-suite",level:3},{value:"E3: Enrich-AI (Augmentation)",id:"e3-enrich-ai-augmentation",level:2},{value:"ENRICH--T01: Implement image analysis with preview generation \u26a0\ufe0f HIGH RISK",id:"enrich--t01-implement-image-analysis-with-preview-generation-\ufe0f-high-risk",level:3},{value:"ENRICH--T02: Implement audio transcription with structured output \u26a0\ufe0f HIGH RISK",id:"enrich--t02-implement-audio-transcription-with-structured-output-\ufe0f-high-risk",level:3},{value:"ENRICH--T03: Implement PDF and video handling",id:"enrich--t03-implement-pdf-and-video-handling",level:3},{value:"ENRICH--T04: Implement link enrichment with fallbacks \u26a0\ufe0f HIGH RISK",id:"enrich--t04-implement-link-enrichment-with-fallbacks-\ufe0f-high-risk",level:3},{value:"ENRICH--T05: Implement enrichment idempotency \u26a0\ufe0f HIGH RISK",id:"enrich--t05-implement-enrichment-idempotency-\ufe0f-high-risk",level:3},{value:"ENRICH--T06: Implement checkpointing and resume logic \u26a0\ufe0f HIGH RISK",id:"enrich--t06-implement-checkpointing-and-resume-logic-\ufe0f-high-risk",level:3},{value:"ENRICH--T07: Implement rate limiting and retry logic \u26a0\ufe0f HIGH RISK",id:"enrich--t07-implement-rate-limiting-and-retry-logic-\ufe0f-high-risk",level:3},{value:"ENRICH--T08: Create enrich-ai test suite",id:"enrich--t08-create-enrich-ai-test-suite",level:3},{value:"E4: Render-Markdown (Output Generation)",id:"e4-render-markdown-output-generation",level:2},{value:"RENDER--T01: Implement grouping and anchor generation",id:"render--t01-implement-grouping-and-anchor-generation",level:3},{value:"RENDER--T02: Implement nested reply and tapback rendering",id:"render--t02-implement-nested-reply-and-tapback-rendering",level:3},{value:"RENDER--T03: Implement embeds and blockquotes",id:"render--t03-implement-embeds-and-blockquotes",level:3},{value:"RENDER--T04: Create determinism test suite \u26a0\ufe0f HIGH RISK",id:"render--t04-create-determinism-test-suite-\ufe0f-high-risk",level:3},{value:"E5: CI/Testing/Tooling (Infrastructure)",id:"e5-citestingtooling-infrastructure",level:2},{value:"CI--T01: Configure Vitest with proper settings",id:"ci--t01-configure-vitest-with-proper-settings",level:3},{value:"CI--T02: Setup coverage with thresholds and CI reporters",id:"ci--t02-setup-coverage-with-thresholds-and-ci-reporters",level:3},{value:"CI--T03: Add package.json test scripts",id:"ci--t03-add-packagejson-test-scripts",level:3},{value:"CI--T04: Create test helper utilities",id:"ci--t04-create-test-helper-utilities",level:3},{value:"E6: Docs &amp; Migration (Knowledge Transfer)",id:"e6-docs--migration-knowledge-transfer",level:2},{value:"DOCS--T01: Update refactor report with implementation deltas",id:"docs--t01-update-refactor-report-with-implementation-deltas",level:3},{value:"DOCS--T02: Write comprehensive usage documentation",id:"docs--t02-write-comprehensive-usage-documentation",level:3},{value:"DOCS--T03: Create troubleshooting guide",id:"docs--t03-create-troubleshooting-guide",level:3},{value:"Dependency Graph",id:"dependency-graph",level:2},{value:"High Risk Tasks (TDD Required)",id:"high-risk-tasks-tdd-required",level:2},{value:"Milestones",id:"milestones",level:2},{value:"Usage for Agents",id:"usage-for-agents",level:2},{value:"Updating Task Status",id:"updating-task-status",level:3},{value:"Example Update",id:"example-update",level:3}];function o(e){const s={blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",input:"input",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(s.header,{children:(0,t.jsx)(s.h1,{id:"imessage-pipeline-implementation-tasks",children:"iMessage Pipeline Implementation Tasks"})}),"\n",(0,t.jsxs)(s.blockquote,{children:["\n",(0,t.jsxs)(s.p,{children:["Comprehensive task breakdown from ",(0,t.jsx)(s.code,{children:"imessage-pipeline-tech-spec.md"})]}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Last updated"}),": 2025-10-17"]}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Total tasks"}),": 30 across 6 epics"]}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Tracking"}),": Task state managed in ",(0,t.jsx)(s.code,{children:"imessage-pipeline-task-state.json"})]}),"\n"]}),"\n",(0,t.jsx)(s.h2,{id:"task-status-legend",children:"Task Status Legend"}),"\n",(0,t.jsxs)(s.ul,{className:"contains-task-list",children:["\n",(0,t.jsxs)(s.li,{className:"task-list-item",children:[(0,t.jsx)(s.input,{type:"checkbox",disabled:!0})," ",(0,t.jsx)(s.strong,{children:"Pending"})," - Not started"]}),"\n",(0,t.jsxs)(s.li,{children:["[~] ",(0,t.jsx)(s.strong,{children:"In Progress"})," - Currently being worked on"]}),"\n",(0,t.jsxs)(s.li,{className:"task-list-item",children:[(0,t.jsx)(s.input,{type:"checkbox",checked:!0,disabled:!0})," ",(0,t.jsx)(s.strong,{children:"Completed"})," - Finished and verified"]}),"\n"]}),"\n",(0,t.jsx)(s.h2,{id:"epic-overview",children:"Epic Overview"}),"\n",(0,t.jsxs)(s.table,{children:[(0,t.jsx)(s.thead,{children:(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.th,{children:"Epic"}),(0,t.jsx)(s.th,{children:"Tasks"}),(0,t.jsx)(s.th,{children:"Risk Profile"}),(0,t.jsx)(s.th,{children:"Est. Days"})]})}),(0,t.jsxs)(s.tbody,{children:[(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:"E1: Schema & Validator"}),(0,t.jsx)(s.td,{children:"3"}),(0,t.jsx)(s.td,{children:"1 MEDIUM, 2 LOW"}),(0,t.jsx)(s.td,{children:"6 days"})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:"E2: Normalize-Link"}),(0,t.jsx)(s.td,{children:"8"}),(0,t.jsx)(s.td,{children:"3 HIGH, 2 MEDIUM, 3 LOW"}),(0,t.jsx)(s.td,{children:"24 days"})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:"E3: Enrich-AI"}),(0,t.jsx)(s.td,{children:"8"}),(0,t.jsx)(s.td,{children:"5 HIGH, 1 MEDIUM, 2 LOW"}),(0,t.jsx)(s.td,{children:"29 days"})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:"E4: Render-Markdown"}),(0,t.jsx)(s.td,{children:"4"}),(0,t.jsx)(s.td,{children:"1 HIGH, 1 MEDIUM, 2 LOW"}),(0,t.jsx)(s.td,{children:"10 days"})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:"E5: CI/Testing/Tooling"}),(0,t.jsx)(s.td,{children:"4"}),(0,t.jsx)(s.td,{children:"1 MEDIUM, 3 LOW"}),(0,t.jsx)(s.td,{children:"6 days"})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:"E6: Docs & Migration"}),(0,t.jsx)(s.td,{children:"3"}),(0,t.jsx)(s.td,{children:"3 LOW"}),(0,t.jsx)(s.td,{children:"4 days"})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:(0,t.jsx)(s.strong,{children:"TOTAL"})}),(0,t.jsx)(s.td,{children:(0,t.jsx)(s.strong,{children:"30"})}),(0,t.jsx)(s.td,{children:(0,t.jsx)(s.strong,{children:"10 HIGH, 5 MEDIUM, 15 LOW"})}),(0,t.jsx)(s.td,{children:(0,t.jsx)(s.strong,{children:"79 days"})})]})]})]}),"\n",(0,t.jsx)(s.hr,{}),"\n",(0,t.jsx)(s.h2,{id:"e1-schema--validator-foundation",children:"E1: Schema & Validator (Foundation)"}),"\n",(0,t.jsx)(s.h3,{id:"schema--t01-create-unified-message-schema-with-zod-validation",children:"SCHEMA--T01: Create unified Message schema with Zod validation"}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Status"}),": [ ] Pending | ",(0,t.jsx)(s.strong,{children:"Risk"}),": MEDIUM | ",(0,t.jsx)(s.strong,{children:"Est"}),": 3 days | ",(0,t.jsx)(s.strong,{children:"Depends on"}),":\nNone"]}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Description"}),": Implement TypeScript interfaces and Zod validators for the\nunified Message model with discriminated union on messageKind."]}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Acceptance Criteria"}),":"]}),"\n",(0,t.jsxs)(s.ul,{className:"contains-task-list",children:["\n",(0,t.jsxs)(s.li,{className:"task-list-item",children:[(0,t.jsx)(s.input,{type:"checkbox",disabled:!0})," ",(0,t.jsx)(s.strong,{children:"SCHEMA-T01-AC01"}),": Message interface with messageKind discriminated\nunion ('text'|'media'|'tapback'|'notification')"]}),"\n",(0,t.jsxs)(s.li,{className:"task-list-item",children:[(0,t.jsx)(s.input,{type:"checkbox",disabled:!0})," ",(0,t.jsx)(s.strong,{children:"SCHEMA-T01-AC02"}),": Zod schema with superRefine for cross-field\ninvariants"]}),"\n",(0,t.jsxs)(s.li,{className:"task-list-item",children:[(0,t.jsx)(s.input,{type:"checkbox",disabled:!0})," ",(0,t.jsx)(s.strong,{children:"SCHEMA-T01-AC03"}),": Media payload validation (exists and complete when\nmessageKind='media')"]}),"\n",(0,t.jsxs)(s.li,{className:"task-list-item",children:[(0,t.jsx)(s.input,{type:"checkbox",disabled:!0})," ",(0,t.jsx)(s.strong,{children:"SCHEMA-T01-AC04"}),": Tapback payload validation (exists when\nmessageKind='tapback')"]}),"\n",(0,t.jsxs)(s.li,{className:"task-list-item",children:[(0,t.jsx)(s.input,{type:"checkbox",disabled:!0})," ",(0,t.jsx)(s.strong,{children:"SCHEMA-T01-AC05"}),": ISO 8601 date validation with Z suffix enforced"]}),"\n",(0,t.jsxs)(s.li,{className:"task-list-item",children:[(0,t.jsx)(s.input,{type:"checkbox",disabled:!0})," ",(0,t.jsx)(s.strong,{children:"SCHEMA-T01-AC06"}),": Absolute path validation for media.path when file\nexists"]}),"\n"]}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Notes"}),": Foundation for entire pipeline. Complex cross-field invariants using\nZod superRefine. Create ",(0,t.jsx)(s.code,{children:"src/schema/message.ts"})," with full schema from refactor\nreport."]}),"\n",(0,t.jsx)(s.hr,{}),"\n",(0,t.jsx)(s.h3,{id:"schema--t02-build-validator-cli-script",children:"SCHEMA--T02: Build validator CLI script"}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Status"}),": [ ] Pending | ",(0,t.jsx)(s.strong,{children:"Risk"}),": LOW | ",(0,t.jsx)(s.strong,{children:"Est"}),": 1 day | ",(0,t.jsx)(s.strong,{children:"Depends on"}),":\nSCHEMA--T01"]}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Description"}),": Create scripts/validate-json.mts CLI to validate message\nartifacts against schema."]}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Acceptance Criteria"}),":"]}),"\n",(0,t.jsxs)(s.ul,{className:"contains-task-list",children:["\n",(0,t.jsxs)(s.li,{className:"task-list-item",children:[(0,t.jsx)(s.input,{type:"checkbox",disabled:!0})," ",(0,t.jsx)(s.strong,{children:"SCHEMA-T02-AC01"}),": CLI accepts JSON file path as argument"]}),"\n",(0,t.jsxs)(s.li,{className:"task-list-item",children:[(0,t.jsx)(s.input,{type:"checkbox",disabled:!0})," ",(0,t.jsx)(s.strong,{children:"SCHEMA-T02-AC02"}),": Validates against Message schema with detailed error\nmessages including field paths"]}),"\n",(0,t.jsxs)(s.li,{className:"task-list-item",children:[(0,t.jsx)(s.input,{type:"checkbox",disabled:!0})," ",(0,t.jsx)(s.strong,{children:"SCHEMA-T02-AC03"}),": Exit code 0 on success, 1 on validation failure"]}),"\n",(0,t.jsxs)(s.li,{className:"task-list-item",children:[(0,t.jsx)(s.input,{type:"checkbox",disabled:!0})," ",(0,t.jsx)(s.strong,{children:"SCHEMA-T02-AC04"}),": Outputs summary stats (total messages, breakdown by\nmessageKind)"]}),"\n"]}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Notes"}),": Straightforward CLI script using Zod validation. Useful for debugging\npipeline outputs."]}),"\n",(0,t.jsx)(s.hr,{}),"\n",(0,t.jsx)(s.h3,{id:"schema--t03-create-fixtures-and-schema-tests",children:"SCHEMA--T03: Create fixtures and schema tests"}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Status"}),": [ ] Pending | ",(0,t.jsx)(s.strong,{children:"Risk"}),": LOW | ",(0,t.jsx)(s.strong,{children:"Est"}),": 2 days | ",(0,t.jsx)(s.strong,{children:"Depends on"}),":\nSCHEMA--T01"]}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Description"}),": Build test fixtures for all messageKind types and unit tests\ncovering schema validation."]}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Acceptance Criteria"}),":"]}),"\n",(0,t.jsxs)(s.ul,{className:"contains-task-list",children:["\n",(0,t.jsxs)(s.li,{className:"task-list-item",children:[(0,t.jsx)(s.input,{type:"checkbox",disabled:!0})," ",(0,t.jsx)(s.strong,{children:"SCHEMA-T03-AC01"}),": Happy path fixtures for all messageKind types (text,\nmedia, tapback, notification)"]}),"\n",(0,t.jsxs)(s.li,{className:"task-list-item",children:[(0,t.jsx)(s.input,{type:"checkbox",disabled:!0})," ",(0,t.jsx)(s.strong,{children:"SCHEMA-T03-AC02"}),": Invariant violation fixtures (media without payload,\ntapback without payload, etc.)"]}),"\n",(0,t.jsxs)(s.li,{className:"task-list-item",children:[(0,t.jsx)(s.input,{type:"checkbox",disabled:!0})," ",(0,t.jsx)(s.strong,{children:"SCHEMA-T03-AC03"}),": Date format violation fixtures (missing Z, invalid\nISO 8601)"]}),"\n",(0,t.jsxs)(s.li,{className:"task-list-item",children:[(0,t.jsx)(s.input,{type:"checkbox",disabled:!0})," ",(0,t.jsx)(s.strong,{children:"SCHEMA-T03-AC04"}),": Unit tests cover all Zod schema branches with >80%\ncoverage"]}),"\n"]}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Notes"}),": Data setup task. Create test fixtures in ",(0,t.jsx)(s.code,{children:"__tests__/fixtures/"}),"\ndirectory. Tests verify schema catches all invariant violations."]}),"\n",(0,t.jsx)(s.hr,{}),"\n",(0,t.jsx)(s.h2,{id:"e2-normalize-link-data-integration",children:"E2: Normalize-Link (Data Integration)"}),"\n",(0,t.jsx)(s.h3,{id:"normalize--t01-implement-csv-to-schema-mapping",children:"NORMALIZE--T01: Implement CSV to schema mapping"}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Status"}),": [ ] Pending | ",(0,t.jsx)(s.strong,{children:"Risk"}),": LOW | ",(0,t.jsx)(s.strong,{children:"Est"}),": 2 days | ",(0,t.jsx)(s.strong,{children:"Depends on"}),":\nSCHEMA--T01"]}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Description"}),": Build ingest-csv component to parse iMazing CSV and convert to\nMessage schema."]}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Acceptance Criteria"}),":"]}),"\n",(0,t.jsxs)(s.ul,{className:"contains-task-list",children:["\n",(0,t.jsxs)(s.li,{className:"task-list-item",children:[(0,t.jsx)(s.input,{type:"checkbox",disabled:!0})," ",(0,t.jsx)(s.strong,{children:"NORMALIZE-T01-AC01"}),": Parse iMazing CSV rows with correct field mapping\nper CSV header"]}),"\n",(0,t.jsxs)(s.li,{className:"task-list-item",children:[(0,t.jsx)(s.input,{type:"checkbox",disabled:!0})," ",(0,t.jsx)(s.strong,{children:"NORMALIZE-T01-AC02"}),": Split rows into text/media/tapback/notification by\nanalyzing content"]}),"\n",(0,t.jsxs)(s.li,{className:"task-list-item",children:[(0,t.jsx)(s.input,{type:"checkbox",disabled:!0})," ",(0,t.jsx)(s.strong,{children:"NORMALIZE-T01-AC03"}),": Convert CSV dates to ISO 8601 UTC with Z suffix"]}),"\n",(0,t.jsxs)(s.li,{className:"task-list-item",children:[(0,t.jsx)(s.input,{type:"checkbox",disabled:!0})," ",(0,t.jsx)(s.strong,{children:"NORMALIZE-T01-AC04"}),": Resolve iMazing attachment paths to absolute paths\nwhen files exist"]}),"\n",(0,t.jsxs)(s.li,{className:"task-list-item",children:[(0,t.jsx)(s.input,{type:"checkbox",disabled:!0})," ",(0,t.jsx)(s.strong,{children:"NORMALIZE-T01-AC05"}),": Preserve row metadata (source, line number) for\nprovenance"]}),"\n"]}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Notes"}),": Well-defined CSV schema mapping. Output to\n",(0,t.jsx)(s.code,{children:"messages.csv.ingested.json"}),". Handle iMazing attachment path patterns."]}),"\n",(0,t.jsx)(s.hr,{}),"\n",(0,t.jsx)(s.h3,{id:"normalize--t02-implement-db-row-splitting-with-part-guids",children:"NORMALIZE--T02: Implement DB row splitting with part GUIDs"}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Status"}),": [ ] Pending | ",(0,t.jsx)(s.strong,{children:"Risk"}),": MEDIUM | ",(0,t.jsx)(s.strong,{children:"Est"}),": 3 days | ",(0,t.jsx)(s.strong,{children:"Depends on"}),":\nSCHEMA--T01"]}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Description"}),": Build logic to split Messages.app DB rows with attachments into\n1 text + N media messages with stable part GUIDs."]}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Acceptance Criteria"}),":"]}),"\n",(0,t.jsxs)(s.ul,{className:"contains-task-list",children:["\n",(0,t.jsxs)(s.li,{className:"task-list-item",children:[(0,t.jsx)(s.input,{type:"checkbox",disabled:!0})," ",(0,t.jsx)(s.strong,{children:"NORMALIZE-T02-AC01"}),": Split DB messages with n attachments into 1 text\nmessage + n media messages"]}),"\n",(0,t.jsxs)(s.li,{className:"task-list-item",children:[(0,t.jsx)(s.input,{type:"checkbox",disabled:!0})," ",(0,t.jsx)(s.strong,{children:"NORMALIZE-T02-AC02"}),": Generate stable part GUIDs using format\n",(0,t.jsx)(s.code,{children:"p:<index>/<original_guid>"})]}),"\n",(0,t.jsxs)(s.li,{className:"task-list-item",children:[(0,t.jsx)(s.input,{type:"checkbox",disabled:!0})," ",(0,t.jsx)(s.strong,{children:"NORMALIZE-T02-AC03"}),": Preserve parent GUID reference in each part's\nmetadata"]}),"\n",(0,t.jsxs)(s.li,{className:"task-list-item",children:[(0,t.jsx)(s.input,{type:"checkbox",disabled:!0})," ",(0,t.jsx)(s.strong,{children:"NORMALIZE-T02-AC04"}),": Convert Apple epoch timestamps to ISO 8601 UTC\nwith Z"]}),"\n",(0,t.jsxs)(s.li,{className:"task-list-item",children:[(0,t.jsx)(s.input,{type:"checkbox",disabled:!0})," ",(0,t.jsx)(s.strong,{children:"NORMALIZE-T02-AC05"}),": Maintain chronological ordering within split parts\nusing index"]}),"\n"]}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Notes"}),": Critical for media-as-message model. Stable part GUID generation\ncrucial for dedup. Handle Apple epoch conversion carefully."]}),"\n",(0,t.jsx)(s.hr,{}),"\n",(0,t.jsx)(s.h3,{id:"normalize--t03-implement-reply-and-tapback-linking-\ufe0f-high-risk",children:"NORMALIZE--T03: Implement reply and tapback linking \u26a0\ufe0f HIGH RISK"}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Status"}),": [ ] Pending | ",(0,t.jsx)(s.strong,{children:"Risk"}),": HIGH | ",(0,t.jsx)(s.strong,{children:"Est"}),": 5 days | ",(0,t.jsx)(s.strong,{children:"Depends on"}),":\nNORMALIZE--T01, NORMALIZE--T02"]}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Description"}),": Build linking logic using DB associations first, then\nheuristics for unlinked messages."]}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"TDD Required"}),": Yes - Red-Green-Refactor cycle mandatory"]}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Acceptance Criteria"}),":"]}),"\n",(0,t.jsxs)(s.ul,{className:"contains-task-list",children:["\n",(0,t.jsxs)(s.li,{className:"task-list-item",children:[(0,t.jsx)(s.input,{type:"checkbox",disabled:!0})," ",(0,t.jsx)(s.strong,{children:"NORMALIZE-T03-AC01"}),": Link replies using DB association_guid as primary\nmethod"]}),"\n",(0,t.jsxs)(s.li,{className:"task-list-item",children:[(0,t.jsx)(s.input,{type:"checkbox",disabled:!0})," ",(0,t.jsx)(s.strong,{children:"NORMALIZE-T03-AC02"}),": Apply heuristics for unlinked replies (timestamp\nproximity ",(0,t.jsx)(s.code,{children:"<30s"}),", content patterns)"]}),"\n",(0,t.jsxs)(s.li,{className:"task-list-item",children:[(0,t.jsx)(s.input,{type:"checkbox",disabled:!0})," ",(0,t.jsx)(s.strong,{children:"NORMALIZE-T03-AC03"}),": Link tapbacks to parent message GUIDs (including\npart GUIDs)"]}),"\n",(0,t.jsxs)(s.li,{className:"task-list-item",children:[(0,t.jsx)(s.input,{type:"checkbox",disabled:!0})," ",(0,t.jsx)(s.strong,{children:"NORMALIZE-T03-AC04"}),": Handle ambiguous links with structured logging and\ntie counters"]}),"\n",(0,t.jsxs)(s.li,{className:"task-list-item",children:[(0,t.jsx)(s.input,{type:"checkbox",disabled:!0})," ",(0,t.jsx)(s.strong,{children:"NORMALIZE-T03-AC05"}),": Maintain parity with CSV linking rules from\noriginal analyzer"]}),"\n"]}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Notes"}),": Heuristic ambiguity is main concern per spec \xa713. Prefer DB\nassociations, log all ties. Test extensively with edge cases."]}),"\n",(0,t.jsx)(s.hr,{}),"\n",(0,t.jsx)(s.h3,{id:"normalize--t04-implement-deduplication-across-sources-\ufe0f-high-risk",children:"NORMALIZE--T04: Implement deduplication across sources \u26a0\ufe0f HIGH RISK"}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Status"}),": [ ] Pending | ",(0,t.jsx)(s.strong,{children:"Risk"}),": HIGH | ",(0,t.jsx)(s.strong,{children:"Est"}),": 4 days | ",(0,t.jsx)(s.strong,{children:"Depends on"}),":\nNORMALIZE--T01, NORMALIZE--T02"]}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Description"}),": Merge CSV and DB sources with deduplication by GUID equivalence\nand content similarity."]}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"TDD Required"}),": Yes - Red-Green-Refactor cycle mandatory"]}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Acceptance Criteria"}),":"]}),"\n",(0,t.jsxs)(s.ul,{className:"contains-task-list",children:["\n",(0,t.jsxs)(s.li,{className:"task-list-item",children:[(0,t.jsx)(s.input,{type:"checkbox",disabled:!0})," ",(0,t.jsx)(s.strong,{children:"NORMALIZE-T04-AC01"}),": Merge CSV and DB by exact GUID match as primary\nstrategy"]}),"\n",(0,t.jsxs)(s.li,{className:"task-list-item",children:[(0,t.jsx)(s.input,{type:"checkbox",disabled:!0})," ",(0,t.jsx)(s.strong,{children:"NORMALIZE-T04-AC02"}),": Prefer DB values for authoritative fields\n(timestamps, associations, handle)"]}),"\n",(0,t.jsxs)(s.li,{className:"task-list-item",children:[(0,t.jsx)(s.input,{type:"checkbox",disabled:!0})," ",(0,t.jsx)(s.strong,{children:"NORMALIZE-T04-AC03"}),": Detect content equivalence for messages without\nmatching GUIDs (normalize text + compare)"]}),"\n",(0,t.jsxs)(s.li,{className:"task-list-item",children:[(0,t.jsx)(s.input,{type:"checkbox",disabled:!0})," ",(0,t.jsx)(s.strong,{children:"NORMALIZE-T04-AC04"}),": Verify no data loss during merge with count\ninvariants (input count >= output count)"]}),"\n",(0,t.jsxs)(s.li,{className:"task-list-item",children:[(0,t.jsx)(s.input,{type:"checkbox",disabled:!0})," ",(0,t.jsx)(s.strong,{children:"NORMALIZE-T04-AC05"}),": Ensure stable GUID assignment across multiple runs\n(deterministic merge)"]}),"\n"]}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Notes"}),": Data loss risk per spec \xa713. Implement count verification and\ndetailed merge logging. Test with overlapping datasets."]}),"\n",(0,t.jsx)(s.hr,{}),"\n",(0,t.jsx)(s.h3,{id:"normalize--t05-implement-absolute-path-enforcement",children:"NORMALIZE--T05: Implement absolute path enforcement"}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Status"}),": [ ] Pending | ",(0,t.jsx)(s.strong,{children:"Risk"}),": MEDIUM | ",(0,t.jsx)(s.strong,{children:"Est"}),": 2 days | ",(0,t.jsx)(s.strong,{children:"Depends on"}),":\nNORMALIZE--T01, NORMALIZE--T02"]}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Description"}),": Enforce absolute paths for all media files, retain filename\nwith provenance for missing files."]}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Acceptance Criteria"}),":"]}),"\n",(0,t.jsxs)(s.ul,{className:"contains-task-list",children:["\n",(0,t.jsxs)(s.li,{className:"task-list-item",children:[(0,t.jsx)(s.input,{type:"checkbox",disabled:!0})," ",(0,t.jsx)(s.strong,{children:"NORMALIZE-T05-AC01"}),": All media.path fields are absolute paths when\nfiles exist on disk"]}),"\n",(0,t.jsxs)(s.li,{className:"task-list-item",children:[(0,t.jsx)(s.input,{type:"checkbox",disabled:!0})," ",(0,t.jsx)(s.strong,{children:"NORMALIZE-T05-AC02"}),": Missing files retain original filename with\nprovenance metadata (source, last_seen)"]}),"\n",(0,t.jsxs)(s.li,{className:"task-list-item",children:[(0,t.jsx)(s.input,{type:"checkbox",disabled:!0})," ",(0,t.jsx)(s.strong,{children:"NORMALIZE-T05-AC03"}),": Path validation errors reported with counters\n(found vs missing)"]}),"\n",(0,t.jsxs)(s.li,{className:"task-list-item",children:[(0,t.jsx)(s.input,{type:"checkbox",disabled:!0})," ",(0,t.jsx)(s.strong,{children:"NORMALIZE-T05-AC04"}),": Support multiple attachment root directories from\nconfig"]}),"\n"]}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Notes"}),": Missing file handling per spec \xa713. Use config for attachment roots.\nLog missing file warnings with counts."]}),"\n",(0,t.jsx)(s.hr,{}),"\n",(0,t.jsx)(s.h3,{id:"normalize--t06-build-date-validator-and-converters-\ufe0f-high-risk",children:"NORMALIZE--T06: Build date validator and converters \u26a0\ufe0f HIGH RISK"}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Status"}),": [ ] Pending | ",(0,t.jsx)(s.strong,{children:"Risk"}),": HIGH | ",(0,t.jsx)(s.strong,{children:"Est"}),": 3 days | ",(0,t.jsx)(s.strong,{children:"Depends on"}),":\nNORMALIZE--T01, NORMALIZE--T02"]}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Description"}),": Create robust date handling for CSV UTC and DB Apple epoch with\nend-to-end validation."]}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"TDD Required"}),": Yes - Red-Green-Refactor cycle mandatory"]}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Acceptance Criteria"}),":"]}),"\n",(0,t.jsxs)(s.ul,{className:"contains-task-list",children:["\n",(0,t.jsxs)(s.li,{className:"task-list-item",children:[(0,t.jsx)(s.input,{type:"checkbox",disabled:!0})," ",(0,t.jsx)(s.strong,{children:"NORMALIZE-T06-AC01"}),": All timestamps in output are ISO 8601 with Z\nsuffix (UTC)"]}),"\n",(0,t.jsxs)(s.li,{className:"task-list-item",children:[(0,t.jsx)(s.input,{type:"checkbox",disabled:!0})," ",(0,t.jsx)(s.strong,{children:"NORMALIZE-T06-AC02"}),": Apple epoch (Mac absolute time = seconds since\n2001-01-01) converts correctly to UTC"]}),"\n",(0,t.jsxs)(s.li,{className:"task-list-item",children:[(0,t.jsx)(s.input,{type:"checkbox",disabled:!0})," ",(0,t.jsx)(s.strong,{children:"NORMALIZE-T06-AC03"}),": CSV UTC timestamps preserve timezone information\n(no drift)"]}),"\n",(0,t.jsxs)(s.li,{className:"task-list-item",children:[(0,t.jsx)(s.input,{type:"checkbox",disabled:!0})," ",(0,t.jsx)(s.strong,{children:"NORMALIZE-T06-AC04"}),": End-to-end date round-trip validation passes\n(parse \u2192 convert \u2192 validate)"]}),"\n"]}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Notes"}),": Timezone drift risk per spec \xa713. Test with known timestamps and DST\nboundaries. Fixtures for edge cases."]}),"\n",(0,t.jsx)(s.hr,{}),"\n",(0,t.jsx)(s.h3,{id:"normalize--t07-add-zod-validation-layer",children:"NORMALIZE--T07: Add Zod validation layer"}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Status"}),": [ ] Pending | ",(0,t.jsx)(s.strong,{children:"Risk"}),": MEDIUM | ",(0,t.jsx)(s.strong,{children:"Est"}),": 2 days | ",(0,t.jsx)(s.strong,{children:"Depends on"}),":\nNORMALIZE--T01-T06"]}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Description"}),": Apply Zod validation to all normalized messages with\ncomprehensive error reporting."]}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Acceptance Criteria"}),":"]}),"\n",(0,t.jsxs)(s.ul,{className:"contains-task-list",children:["\n",(0,t.jsxs)(s.li,{className:"task-list-item",children:[(0,t.jsx)(s.input,{type:"checkbox",disabled:!0})," ",(0,t.jsx)(s.strong,{children:"NORMALIZE-T07-AC01"}),": Run Zod schema validation on all normalized\nmessages before output"]}),"\n",(0,t.jsxs)(s.li,{className:"task-list-item",children:[(0,t.jsx)(s.input,{type:"checkbox",disabled:!0})," ",(0,t.jsx)(s.strong,{children:"NORMALIZE-T07-AC02"}),": Error reporting includes field path and validation\nfailure reason (use Zod's error formatting)"]}),"\n",(0,t.jsxs)(s.li,{className:"task-list-item",children:[(0,t.jsx)(s.input,{type:"checkbox",disabled:!0})," ",(0,t.jsx)(s.strong,{children:"NORMALIZE-T07-AC03"}),": Batch validation with error collection (don't\nfail-fast, report all errors)"]}),"\n",(0,t.jsxs)(s.li,{className:"task-list-item",children:[(0,t.jsx)(s.input,{type:"checkbox",disabled:!0})," ",(0,t.jsx)(s.strong,{children:"NORMALIZE-T07-AC04"}),": camelCase field enforcement via Zod schema (reject\nsnake_case)"]}),"\n"]}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Notes"}),": Final validation gate. Output to ",(0,t.jsx)(s.code,{children:"messages.normalized.json"}),". Collect\nall validation errors for debugging."]}),"\n",(0,t.jsx)(s.hr,{}),"\n",(0,t.jsx)(s.h3,{id:"normalize--t08-create-normalize-link-test-suite",children:"NORMALIZE--T08: Create normalize-link test suite"}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Status"}),": [ ] Pending | ",(0,t.jsx)(s.strong,{children:"Risk"}),": LOW | ",(0,t.jsx)(s.strong,{children:"Est"}),": 3 days | ",(0,t.jsx)(s.strong,{children:"Depends on"}),":\nNORMALIZE--T07"]}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Description"}),": Comprehensive tests for split, linking, dedup, dates, and paths\nwith >70% coverage."]}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Acceptance Criteria"}),":"]}),"\n",(0,t.jsxs)(s.ul,{className:"contains-task-list",children:["\n",(0,t.jsxs)(s.li,{className:"task-list-item",children:[(0,t.jsx)(s.input,{type:"checkbox",disabled:!0})," ",(0,t.jsx)(s.strong,{children:"NORMALIZE-T08-AC01"}),": Unit tests for DB split logic with various\nattachment counts (0, 1, 5, 10)"]}),"\n",(0,t.jsxs)(s.li,{className:"task-list-item",children:[(0,t.jsx)(s.input,{type:"checkbox",disabled:!0})," ",(0,t.jsx)(s.strong,{children:"NORMALIZE-T08-AC02"}),": Integration tests for linking parity between CSV\nand DB sources"]}),"\n",(0,t.jsxs)(s.li,{className:"task-list-item",children:[(0,t.jsx)(s.input,{type:"checkbox",disabled:!0})," ",(0,t.jsx)(s.strong,{children:"NORMALIZE-T08-AC03"}),": Dedup tests with overlapping CSV/DB datasets\n(exact match, content match, no match)"]}),"\n",(0,t.jsxs)(s.li,{className:"task-list-item",children:[(0,t.jsx)(s.input,{type:"checkbox",disabled:!0})," ",(0,t.jsx)(s.strong,{children:"NORMALIZE-T08-AC04"}),": Date conversion tests for edge cases (DST\nboundaries, leap seconds, epoch boundaries)"]}),"\n",(0,t.jsxs)(s.li,{className:"task-list-item",children:[(0,t.jsx)(s.input,{type:"checkbox",disabled:!0})," ",(0,t.jsx)(s.strong,{children:"NORMALIZE-T08-AC05"}),": Path resolution tests with missing files and\nmultiple roots"]}),"\n"]}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Notes"}),": Test after implementation. Aim for >70% branch coverage per spec \xa79.\nUse fixtures from T03."]}),"\n",(0,t.jsx)(s.hr,{}),"\n",(0,t.jsx)(s.h2,{id:"e3-enrich-ai-augmentation",children:"E3: Enrich-AI (Augmentation)"}),"\n",(0,t.jsx)(s.h3,{id:"enrich--t01-implement-image-analysis-with-preview-generation-\ufe0f-high-risk",children:"ENRICH--T01: Implement image analysis with preview generation \u26a0\ufe0f HIGH RISK"}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Status"}),": [ ] Pending | ",(0,t.jsx)(s.strong,{children:"Risk"}),": HIGH | ",(0,t.jsx)(s.strong,{children:"Est"}),": 4 days | ",(0,t.jsx)(s.strong,{children:"Depends on"}),":\nSCHEMA--T01, NORMALIZE--T07"]}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Description"}),": Port image analysis: HEIC/TIFF \u2192 JPG preview, Gemini vision\ncaption/summary."]}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"TDD Required"}),": Yes - Red-Green-Refactor cycle mandatory"]}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Acceptance Criteria"}),":"]}),"\n",(0,t.jsxs)(s.ul,{className:"contains-task-list",children:["\n",(0,t.jsxs)(s.li,{className:"task-list-item",children:[(0,t.jsx)(s.input,{type:"checkbox",disabled:!0})," ",(0,t.jsx)(s.strong,{children:"ENRICH-T01-AC01"}),": HEIC files convert to JPG preview with quality\npreservation (\u226590% quality)"]}),"\n",(0,t.jsxs)(s.li,{className:"task-list-item",children:[(0,t.jsx)(s.input,{type:"checkbox",disabled:!0})," ",(0,t.jsx)(s.strong,{children:"ENRICH-T01-AC02"}),": TIFF files convert to JPG preview"]}),"\n",(0,t.jsxs)(s.li,{className:"task-list-item",children:[(0,t.jsx)(s.input,{type:"checkbox",disabled:!0})," ",(0,t.jsx)(s.strong,{children:"ENRICH-T01-AC03"}),": Preview generated once per file and cached by\nfilename (skip if preview exists)"]}),"\n",(0,t.jsxs)(s.li,{className:"task-list-item",children:[(0,t.jsx)(s.input,{type:"checkbox",disabled:!0})," ",(0,t.jsx)(s.strong,{children:"ENRICH-T01-AC04"}),": Gemini vision API call with structured prompt for\ncaption + summary"]}),"\n",(0,t.jsxs)(s.li,{className:"task-list-item",children:[(0,t.jsx)(s.input,{type:"checkbox",disabled:!0})," ",(0,t.jsx)(s.strong,{children:"ENRICH-T01-AC05"}),": Parse API response into enrichment array with\nkind='image_analysis'"]}),"\n",(0,t.jsxs)(s.li,{className:"task-list-item",children:[(0,t.jsx)(s.input,{type:"checkbox",disabled:!0})," ",(0,t.jsx)(s.strong,{children:"ENRICH-T01-AC06"}),": Store provenance (provider, model, version,\ntimestamp) in enrichment entry"]}),"\n"]}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Notes"}),": HEIC/TIFF handling complexity per spec \xa78. Cache preview by filename\nto avoid regeneration. Use sharp/imagemagick for conversion."]}),"\n",(0,t.jsx)(s.hr,{}),"\n",(0,t.jsx)(s.h3,{id:"enrich--t02-implement-audio-transcription-with-structured-output-\ufe0f-high-risk",children:"ENRICH--T02: Implement audio transcription with structured output \u26a0\ufe0f HIGH RISK"}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Status"}),": [ ] Pending | ",(0,t.jsx)(s.strong,{children:"Risk"}),": HIGH | ",(0,t.jsx)(s.strong,{children:"Est"}),": 4 days | ",(0,t.jsx)(s.strong,{children:"Depends on"}),":\nSCHEMA--T01, NORMALIZE--T07"]}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Description"}),": Port audio transcription: structured prompt, timestamps,\nspeaker labels, short description."]}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"TDD Required"}),": Yes - Red-Green-Refactor cycle mandatory"]}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Acceptance Criteria"}),":"]}),"\n",(0,t.jsxs)(s.ul,{className:"contains-task-list",children:["\n",(0,t.jsxs)(s.li,{className:"task-list-item",children:[(0,t.jsx)(s.input,{type:"checkbox",disabled:!0})," ",(0,t.jsx)(s.strong,{children:"ENRICH-T02-AC01"}),": Use structured prompt for transcription requesting\ntimestamps and speakers"]}),"\n",(0,t.jsxs)(s.li,{className:"task-list-item",children:[(0,t.jsx)(s.input,{type:"checkbox",disabled:!0})," ",(0,t.jsx)(s.strong,{children:"ENRICH-T02-AC02"}),": Extract speaker labels if available (Speaker 1,\nSpeaker 2, etc.)"]}),"\n",(0,t.jsxs)(s.li,{className:"task-list-item",children:[(0,t.jsx)(s.input,{type:"checkbox",disabled:!0})," ",(0,t.jsx)(s.strong,{children:"ENRICH-T02-AC03"}),": Generate short description (1-2 sentences)\nsummarizing audio content"]}),"\n",(0,t.jsxs)(s.li,{className:"task-list-item",children:[(0,t.jsx)(s.input,{type:"checkbox",disabled:!0})," ",(0,t.jsx)(s.strong,{children:"ENRICH-T02-AC04"}),": Store under media.enrichment with\nkind='transcription'"]}),"\n",(0,t.jsxs)(s.li,{className:"task-list-item",children:[(0,t.jsx)(s.input,{type:"checkbox",disabled:!0})," ",(0,t.jsx)(s.strong,{children:"ENRICH-T02-AC05"}),": Handle long audio files (>10min) with streaming or\nchunking strategy"]}),"\n"]}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Notes"}),": Prompt engineering critical per spec. Test with various audio lengths\nand qualities. Store full transcript + short description."]}),"\n",(0,t.jsx)(s.hr,{}),"\n",(0,t.jsx)(s.h3,{id:"enrich--t03-implement-pdf-and-video-handling",children:"ENRICH--T03: Implement PDF and video handling"}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Status"}),": [ ] Pending | ",(0,t.jsx)(s.strong,{children:"Risk"}),": MEDIUM | ",(0,t.jsx)(s.strong,{children:"Est"}),": 2 days | ",(0,t.jsx)(s.strong,{children:"Depends on"}),":\nSCHEMA--T01, NORMALIZE--T07"]}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Description"}),": PDF summarization via Gemini, video copied with note (no heavy\nprocessing)."]}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Acceptance Criteria"}),":"]}),"\n",(0,t.jsxs)(s.ul,{className:"contains-task-list",children:["\n",(0,t.jsxs)(s.li,{className:"task-list-item",children:[(0,t.jsx)(s.input,{type:"checkbox",disabled:!0})," ",(0,t.jsx)(s.strong,{children:"ENRICH-T03-AC01"}),": PDF summarization via Gemini with page limit (e.g.,\nfirst 10 pages)"]}),"\n",(0,t.jsxs)(s.li,{className:"task-list-item",children:[(0,t.jsx)(s.input,{type:"checkbox",disabled:!0})," ",(0,t.jsx)(s.strong,{children:"ENRICH-T03-AC02"}),": Video files copied to output with metadata note only\n(no transcription by default)"]}),"\n",(0,t.jsxs)(s.li,{className:"task-list-item",children:[(0,t.jsx)(s.input,{type:"checkbox",disabled:!0})," ",(0,t.jsx)(s.strong,{children:"ENRICH-T03-AC03"}),": Fallback to filename when summarization fails (with\nerror logging)"]}),"\n",(0,t.jsxs)(s.li,{className:"task-list-item",children:[(0,t.jsx)(s.input,{type:"checkbox",disabled:!0})," ",(0,t.jsx)(s.strong,{children:"ENRICH-T03-AC04"}),": Track unsupported formats in error log with counts"]}),"\n"]}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Notes"}),": PDF handling varies by format. Video is out of scope per spec \xa71. Log\nunsupported formats."]}),"\n",(0,t.jsx)(s.hr,{}),"\n",(0,t.jsx)(s.h3,{id:"enrich--t04-implement-link-enrichment-with-fallbacks-\ufe0f-high-risk",children:"ENRICH--T04: Implement link enrichment with fallbacks \u26a0\ufe0f HIGH RISK"}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Status"}),": [ ] Pending | ",(0,t.jsx)(s.strong,{children:"Risk"}),": HIGH | ",(0,t.jsx)(s.strong,{children:"Est"}),": 5 days | ",(0,t.jsx)(s.strong,{children:"Depends on"}),":\nSCHEMA--T01, NORMALIZE--T07"]}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Description"}),": Firecrawl primary, YouTube/Spotify/social fallbacks, resilient\nerror handling."]}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"TDD Required"}),": Yes - Red-Green-Refactor cycle mandatory"]}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Acceptance Criteria"}),":"]}),"\n",(0,t.jsxs)(s.ul,{className:"contains-task-list",children:["\n",(0,t.jsxs)(s.li,{className:"task-list-item",children:[(0,t.jsx)(s.input,{type:"checkbox",disabled:!0})," ",(0,t.jsx)(s.strong,{children:"ENRICH-T04-AC01"}),": Firecrawl as primary provider for generic link\ncontext extraction"]}),"\n",(0,t.jsxs)(s.li,{className:"task-list-item",children:[(0,t.jsx)(s.input,{type:"checkbox",disabled:!0})," ",(0,t.jsx)(s.strong,{children:"ENRICH-T04-AC02"}),": YouTube fallback using title/channel extraction from\npage source or API"]}),"\n",(0,t.jsxs)(s.li,{className:"task-list-item",children:[(0,t.jsx)(s.input,{type:"checkbox",disabled:!0})," ",(0,t.jsx)(s.strong,{children:"ENRICH-T04-AC03"}),": Spotify fallback using track/artist extraction from\nembed data"]}),"\n",(0,t.jsxs)(s.li,{className:"task-list-item",children:[(0,t.jsx)(s.input,{type:"checkbox",disabled:!0})," ",(0,t.jsx)(s.strong,{children:"ENRICH-T04-AC04"}),": Social media fallbacks (Twitter/Instagram) using meta\ntags and structured data"]}),"\n",(0,t.jsxs)(s.li,{className:"task-list-item",children:[(0,t.jsx)(s.input,{type:"checkbox",disabled:!0})," ",(0,t.jsx)(s.strong,{children:"ENRICH-T04-AC05"}),": Never crash on link enrichment failure (wrap in\ntry/catch, log error, continue)"]}),"\n",(0,t.jsxs)(s.li,{className:"task-list-item",children:[(0,t.jsx)(s.input,{type:"checkbox",disabled:!0})," ",(0,t.jsx)(s.strong,{children:"ENRICH-T04-AC06"}),": Store enrichment with kind='link_context' and\nprovider provenance"]}),"\n"]}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Notes"}),": Rate limits and API changes per spec \xa713. Provider abstraction for\neasy mocking. Test all fallback paths."]}),"\n",(0,t.jsx)(s.hr,{}),"\n",(0,t.jsx)(s.h3,{id:"enrich--t05-implement-enrichment-idempotency-\ufe0f-high-risk",children:"ENRICH--T05: Implement enrichment idempotency \u26a0\ufe0f HIGH RISK"}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Status"}),": [x] Completed | ",(0,t.jsx)(s.strong,{children:"Risk"}),": HIGH | ",(0,t.jsx)(s.strong,{children:"Est"}),": 3 days | ",(0,t.jsx)(s.strong,{children:"Depends on"}),":\nENRICH--T01, ENRICH--T02, ENRICH--T03, ENRICH--T04"]}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Description"}),": Skip enrichment if media.id + kind already exists, prevent\nduplicate entries."]}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"TDD Required"}),": Yes - Red-Green-Refactor cycle mandatory"]}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Acceptance Criteria"}),":"]}),"\n",(0,t.jsxs)(s.ul,{className:"contains-task-list",children:["\n",(0,t.jsxs)(s.li,{className:"task-list-item",children:[(0,t.jsx)(s.input,{type:"checkbox",checked:!0,disabled:!0})," ",(0,t.jsx)(s.strong,{children:"ENRICH-T05-AC01"}),": Skip enrichment if media.enrichment already contains\nentry with matching kind"]}),"\n",(0,t.jsxs)(s.li,{className:"task-list-item",children:[(0,t.jsx)(s.input,{type:"checkbox",checked:!0,disabled:!0})," ",(0,t.jsx)(s.strong,{children:"ENRICH-T05-AC02"}),": Deduplicate enrichment array by kind before adding\nnew entries"]}),"\n",(0,t.jsxs)(s.li,{className:"task-list-item",children:[(0,t.jsx)(s.input,{type:"checkbox",checked:!0,disabled:!0})," ",(0,t.jsx)(s.strong,{children:"ENRICH-T05-AC03"}),": Re-running enrich-ai does not create duplicate\nentries (verified with tests)"]}),"\n",(0,t.jsxs)(s.li,{className:"task-list-item",children:[(0,t.jsx)(s.input,{type:"checkbox",checked:!0,disabled:!0})," ",(0,t.jsx)(s.strong,{children:"ENRICH-T05-AC04"}),": Support --force-refresh flag to override idempotency\nand re-enrich"]}),"\n"]}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Notes"}),": Completed with Wallaby TDD. Created src/enrich/idempotency.ts with\ncomprehensive test coverage (92.31% branches). All 27 tests passing (19 unit + 8\nintegration)."]}),"\n",(0,t.jsx)(s.hr,{}),"\n",(0,t.jsx)(s.h3,{id:"enrich--t06-implement-checkpointing-and-resume-logic-\ufe0f-high-risk",children:"ENRICH--T06: Implement checkpointing and resume logic \u26a0\ufe0f HIGH RISK"}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Status"}),": [x] Completed | ",(0,t.jsx)(s.strong,{children:"Risk"}),": HIGH | ",(0,t.jsx)(s.strong,{children:"Est"}),": 4 days | ",(0,t.jsx)(s.strong,{children:"Depends on"}),":\nENRICH--T05"]}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Description"}),": Atomic checkpoint writes, resume within \u22641 item, config\nconsistency verification."]}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"TDD Required"}),": Yes - Red-Green-Refactor cycle mandatory"]}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Acceptance Criteria"}),":"]}),"\n",(0,t.jsxs)(s.ul,{className:"contains-task-list",children:["\n",(0,t.jsxs)(s.li,{className:"task-list-item",children:[(0,t.jsx)(s.input,{type:"checkbox",checked:!0,disabled:!0})," ",(0,t.jsx)(s.strong,{children:"ENRICH-T06-AC01"}),": Write checkpoint after every N items (configurable,\ndefault 100)"]}),"\n",(0,t.jsxs)(s.li,{className:"task-list-item",children:[(0,t.jsx)(s.input,{type:"checkbox",checked:!0,disabled:!0})," ",(0,t.jsx)(s.strong,{children:"ENRICH-T06-AC02"}),": Checkpoint includes: last_index, partial_outputs,\nstats (processed/failed), failed_items array"]}),"\n",(0,t.jsxs)(s.li,{className:"task-list-item",children:[(0,t.jsx)(s.input,{type:"checkbox",checked:!0,disabled:!0})," ",(0,t.jsx)(s.strong,{children:"ENRICH-T06-AC03"}),": Atomic checkpoint writes using temp file + rename\npattern"]}),"\n",(0,t.jsxs)(s.li,{className:"task-list-item",children:[(0,t.jsx)(s.input,{type:"checkbox",checked:!0,disabled:!0})," ",(0,t.jsx)(s.strong,{children:"ENRICH-T06-AC04"}),": Resume flag (--resume) restarts within \u22641 item of\nlast checkpoint per spec \xa712 AC E5"]}),"\n",(0,t.jsxs)(s.li,{className:"task-list-item",children:[(0,t.jsx)(s.input,{type:"checkbox",checked:!0,disabled:!0})," ",(0,t.jsx)(s.strong,{children:"ENRICH-T06-AC05"}),": Verify config consistency (hash comparison) before\nresuming, fail if mismatch"]}),"\n"]}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Notes"}),": Completed with Wallaby TDD. Created src/enrich/checkpoint.ts with 29\nunit tests (all passing). Coverage: 60% branches."]}),"\n",(0,t.jsx)(s.hr,{}),"\n",(0,t.jsx)(s.h3,{id:"enrich--t07-implement-rate-limiting-and-retry-logic-\ufe0f-high-risk",children:"ENRICH--T07: Implement rate limiting and retry logic \u26a0\ufe0f HIGH RISK"}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Status"}),": [ ] Pending | ",(0,t.jsx)(s.strong,{children:"Risk"}),": HIGH | ",(0,t.jsx)(s.strong,{children:"Est"}),": 3 days | ",(0,t.jsx)(s.strong,{children:"Depends on"}),":\nENRICH--T01, ENRICH--T02, ENRICH--T03, ENRICH--T04"]}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Description"}),": Configurable delays, exponential backoff with jitter, circuit\nbreaker."]}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"TDD Required"}),": Yes - Red-Green-Refactor cycle mandatory"]}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Acceptance Criteria"}),":"]}),"\n",(0,t.jsxs)(s.ul,{className:"contains-task-list",children:["\n",(0,t.jsxs)(s.li,{className:"task-list-item",children:[(0,t.jsx)(s.input,{type:"checkbox",disabled:!0})," ",(0,t.jsx)(s.strong,{children:"ENRICH-T07-AC01"}),": Respect configurable rateLimitDelay between API calls\n(default 1000ms)"]}),"\n",(0,t.jsxs)(s.li,{className:"task-list-item",children:[(0,t.jsx)(s.input,{type:"checkbox",disabled:!0})," ",(0,t.jsx)(s.strong,{children:"ENRICH-T07-AC02"}),": Exponential backoff for 429 responses: 2^n seconds\nwith +/- 25% jitter"]}),"\n",(0,t.jsxs)(s.li,{className:"task-list-item",children:[(0,t.jsx)(s.input,{type:"checkbox",disabled:!0})," ",(0,t.jsx)(s.strong,{children:"ENRICH-T07-AC03"}),": Retry 5xx errors with maxRetries limit (default 3)"]}),"\n",(0,t.jsxs)(s.li,{className:"task-list-item",children:[(0,t.jsx)(s.input,{type:"checkbox",disabled:!0})," ",(0,t.jsx)(s.strong,{children:"ENRICH-T07-AC04"}),": Respect Retry-After header when present in 429/503\nresponses"]}),"\n",(0,t.jsxs)(s.li,{className:"task-list-item",children:[(0,t.jsx)(s.input,{type:"checkbox",disabled:!0})," ",(0,t.jsx)(s.strong,{children:"ENRICH-T07-AC05"}),": Circuit breaker after N consecutive failures\n(default 5) to prevent cascading failures"]}),"\n"]}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Notes"}),": Rate limit handling per spec \xa76, \xa713. Test with mock rate limit\nresponses. Jitter prevents thundering herd."]}),"\n",(0,t.jsx)(s.hr,{}),"\n",(0,t.jsx)(s.h3,{id:"enrich--t08-create-enrich-ai-test-suite",children:"ENRICH--T08: Create enrich-ai test suite"}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Status"}),": [ ] Pending | ",(0,t.jsx)(s.strong,{children:"Risk"}),": LOW | ",(0,t.jsx)(s.strong,{children:"Est"}),": 3 days | ",(0,t.jsx)(s.strong,{children:"Depends on"}),":\nENRICH--T05, ENRICH--T06, ENRICH--T07"]}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Description"}),": Mock providers, idempotency tests, checkpoint tests, rate limit\ntests, integration tests."]}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Acceptance Criteria"}),":"]}),"\n",(0,t.jsxs)(s.ul,{className:"contains-task-list",children:["\n",(0,t.jsxs)(s.li,{className:"task-list-item",children:[(0,t.jsx)(s.input,{type:"checkbox",disabled:!0})," ",(0,t.jsx)(s.strong,{children:"ENRICH-T08-AC01"}),": Mock providers for image/audio/link enrichment (no\nreal API calls in tests)"]}),"\n",(0,t.jsxs)(s.li,{className:"task-list-item",children:[(0,t.jsx)(s.input,{type:"checkbox",disabled:!0})," ",(0,t.jsx)(s.strong,{children:"ENRICH-T08-AC02"}),": Idempotency tests verify no duplicate enrichments on\nmultiple runs"]}),"\n",(0,t.jsxs)(s.li,{className:"task-list-item",children:[(0,t.jsx)(s.input,{type:"checkbox",disabled:!0})," ",(0,t.jsx)(s.strong,{children:"ENRICH-T08-AC03"}),": Checkpoint resume tests verify state restoration\nwithin \u22641 item"]}),"\n",(0,t.jsxs)(s.li,{className:"task-list-item",children:[(0,t.jsx)(s.input,{type:"checkbox",disabled:!0})," ",(0,t.jsx)(s.strong,{children:"ENRICH-T08-AC04"}),": Rate limit gate tests verify delay enforcement and\nbackoff behavior"]}),"\n",(0,t.jsxs)(s.li,{className:"task-list-item",children:[(0,t.jsx)(s.input,{type:"checkbox",disabled:!0})," ",(0,t.jsx)(s.strong,{children:"ENRICH-T08-AC05"}),": Integration tests with real file fixtures (small\nsamples, no API calls)"]}),"\n"]}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Notes"}),": Test after implementation. Use MSW for API mocking. Aim for >70%\nbranch coverage. Test failure scenarios."]}),"\n",(0,t.jsx)(s.hr,{}),"\n",(0,t.jsx)(s.h2,{id:"e4-render-markdown-output-generation",children:"E4: Render-Markdown (Output Generation)"}),"\n",(0,t.jsx)(s.h3,{id:"render--t01-implement-grouping-and-anchor-generation",children:"RENDER--T01: Implement grouping and anchor generation"}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Status"}),": [ ] Pending | ",(0,t.jsx)(s.strong,{children:"Risk"}),": LOW | ",(0,t.jsx)(s.strong,{children:"Est"}),": 2 days | ",(0,t.jsx)(s.strong,{children:"Depends on"}),":\nSCHEMA--T01, ENRICH--T06"]}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Description"}),": Group by date and time-of-day, generate Obsidian-friendly\ndeep-link anchors."]}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Acceptance Criteria"}),":"]}),"\n",(0,t.jsxs)(s.ul,{className:"contains-task-list",children:["\n",(0,t.jsxs)(s.li,{className:"task-list-item",children:[(0,t.jsx)(s.input,{type:"checkbox",disabled:!0})," ",(0,t.jsx)(s.strong,{children:"RENDER-T01-AC01"}),": Group messages by date (YYYY-MM-DD) into separate\nmarkdown files"]}),"\n",(0,t.jsxs)(s.li,{className:"task-list-item",children:[(0,t.jsx)(s.input,{type:"checkbox",disabled:!0})," ",(0,t.jsx)(s.strong,{children:"RENDER-T01-AC02"}),": Sub-group by time-of-day: Morning (00:00-11:59),\nAfternoon (12:00-17:59), Evening (18:00-23:59)"]}),"\n",(0,t.jsxs)(s.li,{className:"task-list-item",children:[(0,t.jsx)(s.input,{type:"checkbox",disabled:!0})," ",(0,t.jsx)(s.strong,{children:"RENDER-T01-AC03"}),": Generate unique anchor IDs for each message (e.g.,\n",(0,t.jsx)(s.code,{children:"#msg-{guid}"}),")"]}),"\n",(0,t.jsxs)(s.li,{className:"task-list-item",children:[(0,t.jsx)(s.input,{type:"checkbox",disabled:!0})," ",(0,t.jsx)(s.strong,{children:"RENDER-T01-AC04"}),": Deep-link anchors work in Obsidian (clickable,\nnavigable)"]}),"\n",(0,t.jsxs)(s.li,{className:"task-list-item",children:[(0,t.jsx)(s.input,{type:"checkbox",disabled:!0})," ",(0,t.jsx)(s.strong,{children:"RENDER-T01-AC05"}),": Maintain chronological ordering within time-of-day\ngroups"]}),"\n"]}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Notes"}),": Straightforward grouping logic. Output per-day markdown files to\nconfigured outputDir."]}),"\n",(0,t.jsx)(s.hr,{}),"\n",(0,t.jsx)(s.h3,{id:"render--t02-implement-nested-reply-and-tapback-rendering",children:"RENDER--T02: Implement nested reply and tapback rendering"}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Status"}),": [ ] Pending | ",(0,t.jsx)(s.strong,{children:"Risk"}),": MEDIUM | ",(0,t.jsx)(s.strong,{children:"Est"}),": 3 days | ",(0,t.jsx)(s.strong,{children:"Depends on"}),":\nRENDER--T01"]}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Description"}),": Render replies as nested blockquotes, tapbacks as emoji\nreactions with mapping."]}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Acceptance Criteria"}),":"]}),"\n",(0,t.jsxs)(s.ul,{className:"contains-task-list",children:["\n",(0,t.jsxs)(s.li,{className:"task-list-item",children:[(0,t.jsx)(s.input,{type:"checkbox",disabled:!0})," ",(0,t.jsx)(s.strong,{children:"RENDER-T02-AC01"}),": Render replies as nested blockquotes (> prefix) under\nparent message"]}),"\n",(0,t.jsxs)(s.li,{className:"task-list-item",children:[(0,t.jsx)(s.input,{type:"checkbox",disabled:!0})," ",(0,t.jsx)(s.strong,{children:"RENDER-T02-AC02"}),": Render tapbacks as emoji reactions using documented\nemoji mapping"]}),"\n",(0,t.jsxs)(s.li,{className:"task-list-item",children:[(0,t.jsx)(s.input,{type:"checkbox",disabled:!0})," ",(0,t.jsx)(s.strong,{children:"RENDER-T02-AC03"}),": Handle multi-level nesting (reply to reply) with\nincreasing indentation"]}),"\n",(0,t.jsxs)(s.li,{className:"task-list-item",children:[(0,t.jsx)(s.input,{type:"checkbox",disabled:!0})," ",(0,t.jsx)(s.strong,{children:"RENDER-T02-AC04"}),": Indent levels match conversation depth (2 spaces per\nlevel)"]}),"\n",(0,t.jsxs)(s.li,{className:"task-list-item",children:[(0,t.jsx)(s.input,{type:"checkbox",disabled:!0})," ",(0,t.jsx)(s.strong,{children:"RENDER-T02-AC05"}),": Preserve sender attribution in nested content (e.g.,\n",(0,t.jsx)(s.strong,{children:"Sender"}),": message)"]}),"\n"]}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Notes"}),": Quote depth handling complexity. Test deeply nested threads. Emoji\nmapping from refactor report."]}),"\n",(0,t.jsx)(s.hr,{}),"\n",(0,t.jsx)(s.h3,{id:"render--t03-implement-embeds-and-blockquotes",children:"RENDER--T03: Implement embeds and blockquotes"}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Status"}),": [ ] Pending | ",(0,t.jsx)(s.strong,{children:"Risk"}),": LOW | ",(0,t.jsx)(s.strong,{children:"Est"}),": 2 days | ",(0,t.jsx)(s.strong,{children:"Depends on"}),":\nRENDER--T01"]}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Description"}),": Obsidian image embeds with preview preference,\ntranscription/link context blockquotes."]}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Acceptance Criteria"}),":"]}),"\n",(0,t.jsxs)(s.ul,{className:"contains-task-list",children:["\n",(0,t.jsxs)(s.li,{className:"task-list-item",children:[(0,t.jsx)(s.input,{type:"checkbox",disabled:!0})," ",(0,t.jsx)(s.strong,{children:"RENDER-T03-AC01"}),": Embed images using Obsidian ![[path]] syntax"]}),"\n",(0,t.jsxs)(s.li,{className:"task-list-item",children:[(0,t.jsx)(s.input,{type:"checkbox",disabled:!0})," ",(0,t.jsx)(s.strong,{children:"RENDER-T03-AC02"}),": Use preview image path for HEIC/TIFF with link to\noriginal in caption"]}),"\n",(0,t.jsxs)(s.li,{className:"task-list-item",children:[(0,t.jsx)(s.input,{type:"checkbox",disabled:!0})," ",(0,t.jsx)(s.strong,{children:"RENDER-T03-AC03"}),": Quote audio transcriptions as blockquotes under media\nmessage"]}),"\n",(0,t.jsxs)(s.li,{className:"task-list-item",children:[(0,t.jsx)(s.input,{type:"checkbox",disabled:!0})," ",(0,t.jsx)(s.strong,{children:"RENDER-T03-AC04"}),": Quote link contexts as blockquotes under text message\ncontaining link"]}),"\n",(0,t.jsxs)(s.li,{className:"task-list-item",children:[(0,t.jsx)(s.input,{type:"checkbox",disabled:!0})," ",(0,t.jsx)(s.strong,{children:"RENDER-T03-AC05"}),": Format PDF summaries as blockquotes with > prefix"]}),"\n"]}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Notes"}),": Formatting task. Prefer preview images per spec \xa712 AC R4. Test\nvarious media types."]}),"\n",(0,t.jsx)(s.hr,{}),"\n",(0,t.jsx)(s.h3,{id:"render--t04-create-determinism-test-suite-\ufe0f-high-risk",children:"RENDER--T04: Create determinism test suite \u26a0\ufe0f HIGH RISK"}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Status"}),": [ ] Pending | ",(0,t.jsx)(s.strong,{children:"Risk"}),": HIGH | ",(0,t.jsx)(s.strong,{children:"Est"}),": 3 days | ",(0,t.jsx)(s.strong,{children:"Depends on"}),":\nRENDER--T01, RENDER--T02, RENDER--T03"]}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Description"}),": Snapshot tests verifying deterministic output, no network\ncalls, performance validation."]}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"TDD Required"}),": Yes - Red-Green-Refactor cycle mandatory"]}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Acceptance Criteria"}),":"]}),"\n",(0,t.jsxs)(s.ul,{className:"contains-task-list",children:["\n",(0,t.jsxs)(s.li,{className:"task-list-item",children:[(0,t.jsx)(s.input,{type:"checkbox",disabled:!0})," ",(0,t.jsx)(s.strong,{children:"RENDER-T04-AC01"}),": Snapshot tests for fixed input produce identical\noutput across runs"]}),"\n",(0,t.jsxs)(s.li,{className:"task-list-item",children:[(0,t.jsx)(s.input,{type:"checkbox",disabled:!0})," ",(0,t.jsx)(s.strong,{children:"RENDER-T04-AC02"}),": No network calls during rendering (verify with\nnetwork mocks or offline mode)"]}),"\n",(0,t.jsxs)(s.li,{className:"task-list-item",children:[(0,t.jsx)(s.input,{type:"checkbox",disabled:!0})," ",(0,t.jsx)(s.strong,{children:"RENDER-T04-AC03"}),": Deterministic ordering of same-timestamp messages\n(stable sort by guid)"]}),"\n",(0,t.jsxs)(s.li,{className:"task-list-item",children:[(0,t.jsx)(s.input,{type:"checkbox",disabled:!0})," ",(0,t.jsx)(s.strong,{children:"RENDER-T04-AC04"}),": Reproducible markdown structure verified with diff\ncomparison"]}),"\n",(0,t.jsxs)(s.li,{className:"task-list-item",children:[(0,t.jsx)(s.input,{type:"checkbox",disabled:!0})," ",(0,t.jsx)(s.strong,{children:"RENDER-T04-AC05"}),": Performance test: render 1000 messages in ",(0,t.jsx)(s.code,{children:"<10s"})]}),"\n"]}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Notes"}),": Determinism critical per spec \xa712 AC R1. Use Vitest snapshot testing.\nVerify no network activity."]}),"\n",(0,t.jsx)(s.hr,{}),"\n",(0,t.jsx)(s.h2,{id:"e5-citestingtooling-infrastructure",children:"E5: CI/Testing/Tooling (Infrastructure)"}),"\n",(0,t.jsx)(s.h3,{id:"ci--t01-configure-vitest-with-proper-settings",children:"CI--T01: Configure Vitest with proper settings"}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Status"}),": [ ] Pending | ",(0,t.jsx)(s.strong,{children:"Risk"}),": LOW | ",(0,t.jsx)(s.strong,{children:"Est"}),": 1 day | ",(0,t.jsx)(s.strong,{children:"Depends on"}),":\nSCHEMA--T01"]}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Description"}),": Setup Vitest with threads pool, CI detection, jsdom, global\nsetup, aliases."]}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Acceptance Criteria"}),":"]}),"\n",(0,t.jsxs)(s.ul,{className:"contains-task-list",children:["\n",(0,t.jsxs)(s.li,{className:"task-list-item",children:[(0,t.jsx)(s.input,{type:"checkbox",disabled:!0})," ",(0,t.jsx)(s.strong,{children:"CI-T01-AC01"}),": Configure threads pool with maxForks \u2264 8 for parallel\nexecution"]}),"\n",(0,t.jsxs)(s.li,{className:"task-list-item",children:[(0,t.jsx)(s.input,{type:"checkbox",disabled:!0})," ",(0,t.jsx)(s.strong,{children:"CI-T01-AC02"}),": Set allowOnly: false to prevent .only in CI per spec \xa79"]}),"\n",(0,t.jsxs)(s.li,{className:"task-list-item",children:[(0,t.jsx)(s.input,{type:"checkbox",disabled:!0})," ",(0,t.jsx)(s.strong,{children:"CI-T01-AC03"}),": Configure jsdom environment for renderer-related tests"]}),"\n",(0,t.jsxs)(s.li,{className:"task-list-item",children:[(0,t.jsx)(s.input,{type:"checkbox",disabled:!0})," ",(0,t.jsx)(s.strong,{children:"CI-T01-AC04"}),": Setup global test setup file at\ntests/vitest/vitest-setup.ts"]}),"\n",(0,t.jsxs)(s.li,{className:"task-list-item",children:[(0,t.jsx)(s.input,{type:"checkbox",disabled:!0})," ",(0,t.jsx)(s.strong,{children:"CI-T01-AC05"}),": Configure Vite aliases (#lib, #components) in\nvitest.config.ts"]}),"\n"]}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Notes"}),": Configuration task. Create vitest.config.ts following spec \xa79\nrequirements."]}),"\n",(0,t.jsx)(s.hr,{}),"\n",(0,t.jsx)(s.h3,{id:"ci--t02-setup-coverage-with-thresholds-and-ci-reporters",children:"CI--T02: Setup coverage with thresholds and CI reporters"}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Status"}),": [ ] Pending | ",(0,t.jsx)(s.strong,{children:"Risk"}),": MEDIUM | ",(0,t.jsx)(s.strong,{children:"Est"}),": 2 days | ",(0,t.jsx)(s.strong,{children:"Depends on"}),":\nCI--T01"]}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Description"}),": Install coverage-v8, configure thresholds \u226570%, CI output\nformats (JUnit, HTML, text-summary)."]}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Acceptance Criteria"}),":"]}),"\n",(0,t.jsxs)(s.ul,{className:"contains-task-list",children:["\n",(0,t.jsxs)(s.li,{className:"task-list-item",children:[(0,t.jsx)(s.input,{type:"checkbox",disabled:!0})," ",(0,t.jsx)(s.strong,{children:"CI-T02-AC01"}),": Install and configure @vitest/coverage-v8"]}),"\n",(0,t.jsxs)(s.li,{className:"task-list-item",children:[(0,t.jsx)(s.input,{type:"checkbox",disabled:!0})," ",(0,t.jsx)(s.strong,{children:"CI-T02-AC02"}),": Set branch coverage threshold \u226570% per spec \xa79"]}),"\n",(0,t.jsxs)(s.li,{className:"task-list-item",children:[(0,t.jsx)(s.input,{type:"checkbox",disabled:!0})," ",(0,t.jsx)(s.strong,{children:"CI-T02-AC03"}),": CI outputs JUnit XML to ./test-results/junit.xml"]}),"\n",(0,t.jsxs)(s.li,{className:"task-list-item",children:[(0,t.jsx)(s.input,{type:"checkbox",disabled:!0})," ",(0,t.jsx)(s.strong,{children:"CI-T02-AC04"}),": Coverage reports to ./test-results/coverage/ with\nformats: junit, html, text-summary"]}),"\n",(0,t.jsxs)(s.li,{className:"task-list-item",children:[(0,t.jsx)(s.input,{type:"checkbox",disabled:!0})," ",(0,t.jsx)(s.strong,{children:"CI-T02-AC05"}),": Detect CI environment via TF_BUILD variable"]}),"\n"]}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Notes"}),": Coverage thresholds must be met. Configure reporters for Azure DevOps\nintegration. Test CI detection."]}),"\n",(0,t.jsx)(s.hr,{}),"\n",(0,t.jsx)(s.h3,{id:"ci--t03-add-packagejson-test-scripts",children:"CI--T03: Add package.json test scripts"}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Status"}),": [ ] Pending | ",(0,t.jsx)(s.strong,{children:"Risk"}),": LOW | ",(0,t.jsx)(s.strong,{children:"Est"}),": 1 day | ",(0,t.jsx)(s.strong,{children:"Depends on"}),":\nCI--T01"]}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Description"}),": Create pnpm scripts for test, test",":coverage",", test",":ci",", lint,\nbuild."]}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Acceptance Criteria"}),":"]}),"\n",(0,t.jsxs)(s.ul,{className:"contains-task-list",children:["\n",(0,t.jsxs)(s.li,{className:"task-list-item",children:[(0,t.jsx)(s.input,{type:"checkbox",disabled:!0})," ",(0,t.jsx)(s.strong,{children:"CI-T03-AC01"}),": pnpm test runs vitest with proper config"]}),"\n",(0,t.jsxs)(s.li,{className:"task-list-item",children:[(0,t.jsx)(s.input,{type:"checkbox",disabled:!0})," ",(0,t.jsx)(s.strong,{children:"CI-T03-AC02"}),": pnpm test",":coverage"," generates coverage reports with\nthresholds"]}),"\n",(0,t.jsxs)(s.li,{className:"task-list-item",children:[(0,t.jsx)(s.input,{type:"checkbox",disabled:!0})," ",(0,t.jsx)(s.strong,{children:"CI-T03-AC03"}),": pnpm test",":ci"," runs with CI-specific settings (reporters,\netc.)"]}),"\n",(0,t.jsxs)(s.li,{className:"task-list-item",children:[(0,t.jsx)(s.input,{type:"checkbox",disabled:!0})," ",(0,t.jsx)(s.strong,{children:"CI-T03-AC04"}),": pnpm lint runs ESLint on all TypeScript files"]}),"\n",(0,t.jsxs)(s.li,{className:"task-list-item",children:[(0,t.jsx)(s.input,{type:"checkbox",disabled:!0})," ",(0,t.jsx)(s.strong,{children:"CI-T03-AC05"}),": pnpm build compiles TypeScript with proper config"]}),"\n"]}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Notes"}),": Package.json script setup. Standard pnpm workspace patterns."]}),"\n",(0,t.jsx)(s.hr,{}),"\n",(0,t.jsx)(s.h3,{id:"ci--t04-create-test-helper-utilities",children:"CI--T04: Create test helper utilities"}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Status"}),": [ ] Pending | ",(0,t.jsx)(s.strong,{children:"Risk"}),": LOW | ",(0,t.jsx)(s.strong,{children:"Est"}),": 2 days | ",(0,t.jsx)(s.strong,{children:"Depends on"}),":\nCI--T01"]}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Description"}),": Build test helpers: renderWithProviders (if React), mock\nproviders, fixture loaders, schema assertions."]}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Acceptance Criteria"}),":"]}),"\n",(0,t.jsxs)(s.ul,{className:"contains-task-list",children:["\n",(0,t.jsxs)(s.li,{className:"task-list-item",children:[(0,t.jsx)(s.input,{type:"checkbox",disabled:!0})," ",(0,t.jsx)(s.strong,{children:"CI-T04-AC01"}),": renderWithProviders helper for React components (if\nneeded per spec \xa75.4)"]}),"\n",(0,t.jsxs)(s.li,{className:"task-list-item",children:[(0,t.jsx)(s.input,{type:"checkbox",disabled:!0})," ",(0,t.jsx)(s.strong,{children:"CI-T04-AC02"}),": Mock provider setup utilities for AI services (Gemini,\nFirecrawl)"]}),"\n",(0,t.jsxs)(s.li,{className:"task-list-item",children:[(0,t.jsx)(s.input,{type:"checkbox",disabled:!0})," ",(0,t.jsx)(s.strong,{children:"CI-T04-AC03"}),": Fixture loading helpers for JSON message datasets"]}),"\n",(0,t.jsxs)(s.li,{className:"task-list-item",children:[(0,t.jsx)(s.input,{type:"checkbox",disabled:!0})," ",(0,t.jsx)(s.strong,{children:"CI-T04-AC04"}),": Assertion utilities for schema validation (wrappers\naround Zod)"]}),"\n"]}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Notes"}),": Test utilities. Create in ",(0,t.jsx)(s.code,{children:"tests/helpers/"})," directory. React helpers\nonly if UI components added later."]}),"\n",(0,t.jsx)(s.hr,{}),"\n",(0,t.jsx)(s.h2,{id:"e6-docs--migration-knowledge-transfer",children:"E6: Docs & Migration (Knowledge Transfer)"}),"\n",(0,t.jsx)(s.h3,{id:"docs--t01-update-refactor-report-with-implementation-deltas",children:"DOCS--T01: Update refactor report with implementation deltas"}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Status"}),": [ ] Pending | ",(0,t.jsx)(s.strong,{children:"Risk"}),": LOW | ",(0,t.jsx)(s.strong,{children:"Est"}),": 1 day | ",(0,t.jsx)(s.strong,{children:"Depends on"}),":\nNORMALIZE--T08, ENRICH--T08, RENDER--T04"]}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Description"}),": Document any changes from spec during implementation, update\ndiagrams, capture lessons learned."]}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Acceptance Criteria"}),":"]}),"\n",(0,t.jsxs)(s.ul,{className:"contains-task-list",children:["\n",(0,t.jsxs)(s.li,{className:"task-list-item",children:[(0,t.jsx)(s.input,{type:"checkbox",disabled:!0})," ",(0,t.jsx)(s.strong,{children:"DOCS-T01-AC01"}),": Document all implementation deltas from original spec"]}),"\n",(0,t.jsxs)(s.li,{className:"task-list-item",children:[(0,t.jsx)(s.input,{type:"checkbox",disabled:!0})," ",(0,t.jsx)(s.strong,{children:"DOCS-T01-AC02"}),": Update architecture diagrams if component structure\nchanged"]}),"\n",(0,t.jsxs)(s.li,{className:"task-list-item",children:[(0,t.jsx)(s.input,{type:"checkbox",disabled:!0})," ",(0,t.jsx)(s.strong,{children:"DOCS-T01-AC03"}),": Capture lessons learned and implementation gotchas"]}),"\n",(0,t.jsxs)(s.li,{className:"task-list-item",children:[(0,t.jsx)(s.input,{type:"checkbox",disabled:!0})," ",(0,t.jsx)(s.strong,{children:"DOCS-T01-AC04"}),": Link to all new files created with brief descriptions"]}),"\n"]}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Notes"}),": Documentation task. Update\n",(0,t.jsx)(s.code,{children:"documentation/imessage-pipeline-refactor-report.md"})," with implementation notes."]}),"\n",(0,t.jsx)(s.hr,{}),"\n",(0,t.jsx)(s.h3,{id:"docs--t02-write-comprehensive-usage-documentation",children:"DOCS--T02: Write comprehensive usage documentation"}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Status"}),": [ ] Pending | ",(0,t.jsx)(s.strong,{children:"Risk"}),": LOW | ",(0,t.jsx)(s.strong,{children:"Est"}),": 2 days | ",(0,t.jsx)(s.strong,{children:"Depends on"}),":\nNORMALIZE--T08, ENRICH--T08, RENDER--T04"]}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Description"}),": Document how to run each stage, end-to-end workflow,\nconfiguration, environment setup, CLI usage."]}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Acceptance Criteria"}),":"]}),"\n",(0,t.jsxs)(s.ul,{className:"contains-task-list",children:["\n",(0,t.jsxs)(s.li,{className:"task-list-item",children:[(0,t.jsx)(s.input,{type:"checkbox",disabled:!0})," ",(0,t.jsx)(s.strong,{children:"DOCS-T02-AC01"}),": Document how to run each stage: ingest-csv, ingest-db,\nnormalize-link, enrich-ai, render-markdown"]}),"\n",(0,t.jsxs)(s.li,{className:"task-list-item",children:[(0,t.jsx)(s.input,{type:"checkbox",disabled:!0})," ",(0,t.jsx)(s.strong,{children:"DOCS-T02-AC02"}),": End-to-end workflow example with sample data and\nexpected outputs"]}),"\n",(0,t.jsxs)(s.li,{className:"task-list-item",children:[(0,t.jsx)(s.input,{type:"checkbox",disabled:!0})," ",(0,t.jsx)(s.strong,{children:"DOCS-T02-AC03"}),": Configuration file documentation with all available\noptions and defaults"]}),"\n",(0,t.jsxs)(s.li,{className:"task-list-item",children:[(0,t.jsx)(s.input,{type:"checkbox",disabled:!0})," ",(0,t.jsx)(s.strong,{children:"DOCS-T02-AC04"}),": Environment variable setup guide (API keys:\nGEMINI_API_KEY, FIRECRAWL_API_KEY)"]}),"\n",(0,t.jsxs)(s.li,{className:"task-list-item",children:[(0,t.jsx)(s.input,{type:"checkbox",disabled:!0})," ",(0,t.jsx)(s.strong,{children:"DOCS-T02-AC05"}),": CLI flags and options documentation for each command"]}),"\n"]}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Notes"}),": Usage documentation. Create\n",(0,t.jsx)(s.code,{children:"documentation/imessage-pipeline-usage.md"}),". Include examples and screenshots."]}),"\n",(0,t.jsx)(s.hr,{}),"\n",(0,t.jsx)(s.h3,{id:"docs--t03-create-troubleshooting-guide",children:"DOCS--T03: Create troubleshooting guide"}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Status"}),": [ ] Pending | ",(0,t.jsx)(s.strong,{children:"Risk"}),": LOW | ",(0,t.jsx)(s.strong,{children:"Est"}),": 1 day | ",(0,t.jsx)(s.strong,{children:"Depends on"}),":\nNORMALIZE--T08, ENRICH--T08, RENDER--T04"]}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Description"}),": Document common issues: dates/timezones, missing files, rate\nlimits, checkpoint failures, validation errors."]}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Acceptance Criteria"}),":"]}),"\n",(0,t.jsxs)(s.ul,{className:"contains-task-list",children:["\n",(0,t.jsxs)(s.li,{className:"task-list-item",children:[(0,t.jsx)(s.input,{type:"checkbox",disabled:!0})," ",(0,t.jsx)(s.strong,{children:"DOCS-T03-AC01"}),": Date/timezone issues troubleshooting (Apple epoch, DST,\nUTC conversion)"]}),"\n",(0,t.jsxs)(s.li,{className:"task-list-item",children:[(0,t.jsx)(s.input,{type:"checkbox",disabled:!0})," ",(0,t.jsx)(s.strong,{children:"DOCS-T03-AC02"}),": Missing media files troubleshooting (path resolution,\nattachment roots)"]}),"\n",(0,t.jsxs)(s.li,{className:"task-list-item",children:[(0,t.jsx)(s.input,{type:"checkbox",disabled:!0})," ",(0,t.jsx)(s.strong,{children:"DOCS-T03-AC03"}),": Rate limit handling guide (429 errors, backoff, circuit\nbreaker)"]}),"\n",(0,t.jsxs)(s.li,{className:"task-list-item",children:[(0,t.jsx)(s.input,{type:"checkbox",disabled:!0})," ",(0,t.jsx)(s.strong,{children:"DOCS-T03-AC04"}),": Checkpoint resume failures (config mismatch, corrupted\ncheckpoint)"]}),"\n",(0,t.jsxs)(s.li,{className:"task-list-item",children:[(0,t.jsx)(s.input,{type:"checkbox",disabled:!0})," ",(0,t.jsx)(s.strong,{children:"DOCS-T03-AC05"}),": Common validation errors and fixes (schema violations,\nmissing fields)"]}),"\n"]}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Notes"}),": Troubleshooting documentation. Create\n",(0,t.jsx)(s.code,{children:"documentation/imessage-pipeline-troubleshooting.md"}),". FAQ format."]}),"\n",(0,t.jsx)(s.hr,{}),"\n",(0,t.jsx)(s.h2,{id:"dependency-graph",children:"Dependency Graph"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{children:"E1 (Schema) - Foundation\n\u251c\u2500\u2500 SCHEMA--T01 \u2192 SCHEMA--T02\n\u251c\u2500\u2500 SCHEMA--T01 \u2192 SCHEMA--T03\n\u2514\u2500\u2500 SCHEMA--T01 \u2192 CI--T01\n\nE2 (Normalize) - Data Integration\n\u251c\u2500\u2500 SCHEMA--T01 \u2192 NORMALIZE--T01\n\u251c\u2500\u2500 SCHEMA--T01 \u2192 NORMALIZE--T02\n\u251c\u2500\u2500 NORMALIZE--T01, T02 \u2192 NORMALIZE--T03 (HIGH RISK)\n\u251c\u2500\u2500 NORMALIZE--T01, T02 \u2192 NORMALIZE--T04 (HIGH RISK)\n\u251c\u2500\u2500 NORMALIZE--T01, T02 \u2192 NORMALIZE--T05\n\u251c\u2500\u2500 NORMALIZE--T01, T02 \u2192 NORMALIZE--T06 (HIGH RISK)\n\u251c\u2500\u2500 NORMALIZE--T01-T06 \u2192 NORMALIZE--T07\n\u2514\u2500\u2500 NORMALIZE--T07 \u2192 NORMALIZE--T08\n\nE3 (Enrich) - AI Augmentation\n\u251c\u2500\u2500 SCHEMA--T01, NORMALIZE--T07 \u2192 ENRICH--T01 (HIGH RISK)\n\u251c\u2500\u2500 SCHEMA--T01, NORMALIZE--T07 \u2192 ENRICH--T02 (HIGH RISK)\n\u251c\u2500\u2500 SCHEMA--T01, NORMALIZE--T07 \u2192 ENRICH--T03\n\u251c\u2500\u2500 SCHEMA--T01, NORMALIZE--T07 \u2192 ENRICH--T04 (HIGH RISK)\n\u251c\u2500\u2500 ENRICH--T01-T04 \u2192 ENRICH--T05 (HIGH RISK)\n\u251c\u2500\u2500 ENRICH--T05 \u2192 ENRICH--T06 (HIGH RISK)\n\u251c\u2500\u2500 ENRICH--T01-T04 \u2192 ENRICH--T07 (HIGH RISK)\n\u2514\u2500\u2500 ENRICH--T05, T06, T07 \u2192 ENRICH--T08\n\nE4 (Render) - Markdown Generation\n\u251c\u2500\u2500 SCHEMA--T01, ENRICH--T06 \u2192 RENDER--T01\n\u251c\u2500\u2500 RENDER--T01 \u2192 RENDER--T02\n\u251c\u2500\u2500 RENDER--T01 \u2192 RENDER--T03\n\u2514\u2500\u2500 RENDER--T01, T02, T03 \u2192 RENDER--T04 (HIGH RISK)\n\nE5 (CI) - Infrastructure\n\u251c\u2500\u2500 SCHEMA--T01 \u2192 CI--T01\n\u251c\u2500\u2500 CI--T01 \u2192 CI--T02\n\u251c\u2500\u2500 CI--T01 \u2192 CI--T03\n\u2514\u2500\u2500 CI--T01 \u2192 CI--T04\n\nE6 (Docs) - Knowledge Transfer\n\u251c\u2500\u2500 All E2, E3, E4 \u2192 DOCS--T01\n\u251c\u2500\u2500 All E2, E3, E4 \u2192 DOCS--T02\n\u2514\u2500\u2500 All E2, E3, E4 \u2192 DOCS--T03\n"})}),"\n",(0,t.jsx)(s.hr,{}),"\n",(0,t.jsx)(s.h2,{id:"high-risk-tasks-tdd-required",children:"High Risk Tasks (TDD Required)"}),"\n",(0,t.jsx)(s.p,{children:"These tasks require strict Test-Driven Development (Red-Green-Refactor cycle):"}),"\n",(0,t.jsxs)(s.ol,{children:["\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"NORMALIZE--T03"}),": Reply/tapback linking (heuristic ambiguity)"]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"NORMALIZE--T04"}),": Deduplication (data loss risk)"]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"NORMALIZE--T06"}),": Date conversion (timezone drift)"]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"ENRICH--T01"}),": Image preview generation (HEIC/TIFF complexity)"]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"ENRICH--T02"}),": Audio transcription (prompt engineering)"]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"ENRICH--T04"}),": Link enrichment (rate limits, API changes)"]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"ENRICH--T05"}),": Idempotency (duplicate prevention)"]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"ENRICH--T06"}),": Checkpointing (resume correctness)"]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"ENRICH--T07"}),": Rate limiting (retry logic)"]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"RENDER--T04"}),": Determinism (output reproducibility)"]}),"\n"]}),"\n",(0,t.jsx)(s.hr,{}),"\n",(0,t.jsx)(s.h2,{id:"milestones",children:"Milestones"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"M1"}),": Schema + validator + fixtures (E1 complete) \u2192 ",(0,t.jsx)(s.strong,{children:"6 days"})]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"M2"}),": Normalize-link with CSV parity and tests (E2 complete) \u2192 ",(0,t.jsx)(s.strong,{children:"+24 days"}),"\n(30 total)"]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"M3"}),": DB split + linking parity + dates/paths validator \u2192 (part of M2)"]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"M4"}),": Enrich-ai extraction with checkpoints and idempotency (E3 complete) \u2192\n",(0,t.jsx)(s.strong,{children:"+29 days"})," (59 total)"]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"M5"}),": Render-markdown deterministic parity with snapshots (E4 complete) \u2192\n",(0,t.jsx)(s.strong,{children:"+10 days"})," (69 total)"]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"M6"}),": CI green with coverage, docs finalized (E5, E6 complete) \u2192 ",(0,t.jsx)(s.strong,{children:"+10\ndays"})," (79 total)"]}),"\n"]}),"\n",(0,t.jsx)(s.hr,{}),"\n",(0,t.jsx)(s.h2,{id:"usage-for-agents",children:"Usage for Agents"}),"\n",(0,t.jsx)(s.h3,{id:"updating-task-status",children:"Updating Task Status"}),"\n",(0,t.jsxs)(s.ol,{children:["\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsx)(s.p,{children:"Start a task:"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:["Update ",(0,t.jsx)(s.code,{children:"status"})," to ",(0,t.jsx)(s.code,{children:'"in_progress"'})]}),"\n",(0,t.jsxs)(s.li,{children:["Set ",(0,t.jsx)(s.code,{children:"started_at"})," to current ISO 8601 timestamp"]}),"\n",(0,t.jsx)(s.li,{children:"Begin working through acceptance criteria"}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsx)(s.p,{children:"Complete acceptance criteria:"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:["Move AC ID from ",(0,t.jsx)(s.code,{children:"acs_remaining"})," to ",(0,t.jsx)(s.code,{children:"acs_completed"})]}),"\n",(0,t.jsx)(s.li,{children:"Add notes about implementation details"}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsx)(s.p,{children:"Complete a task:"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:["Update ",(0,t.jsx)(s.code,{children:"status"})," to ",(0,t.jsx)(s.code,{children:'"completed"'})]}),"\n",(0,t.jsxs)(s.li,{children:["Set ",(0,t.jsx)(s.code,{children:"completed_at"})," to current ISO 8601 timestamp"]}),"\n",(0,t.jsxs)(s.li,{children:["Ensure all ACs are in ",(0,t.jsx)(s.code,{children:"acs_completed"})]}),"\n",(0,t.jsx)(s.li,{children:"Final notes summarizing work and any deviations"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(s.h3,{id:"example-update",children:"Example Update"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-json",children:'{\n  "SCHEMA--T01": {\n    "acs_completed": ["SCHEMA-T01-AC01", "SCHEMA-T01-AC02"],\n    "acs_remaining": [\n      "SCHEMA-T01-AC03",\n      "SCHEMA-T01-AC04",\n      "SCHEMA-T01-AC05",\n      "SCHEMA-T01-AC06"\n    ],\n    "completed_at": null,\n    "notes": "In progress. Completed Message interface and basic Zod schema. Working on cross-field invariants next.",\n    "started_at": "2025-10-17T14:30:00.000Z",\n    "status": "in_progress"\n  }\n}\n'})}),"\n",(0,t.jsx)(s.hr,{}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Generated from"}),": ",(0,t.jsx)(s.code,{children:"documentation/imessage-pipeline-tech-spec.md"})," ",(0,t.jsx)(s.strong,{children:"Tracking\nfile"}),": ",(0,t.jsx)(s.code,{children:"documentation/imessage-pipeline-task-state.json"})," ",(0,t.jsx)(s.strong,{children:"Last updated"}),":\n2025-10-17"]})]})}function h(e={}){const{wrapper:s}={...(0,r.R)(),...e.components};return s?(0,t.jsx)(s,{...e,children:(0,t.jsx)(o,{...e})}):o(e)}},5705:(e,s,n)=>{n.d(s,{R:()=>l,x:()=>a});var i=n(7701);const t={},r=i.createContext(t);function l(e){const s=i.useContext(r);return i.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function a(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:l(e.components),i.createElement(r.Provider,{value:s},e.children)}}}]);