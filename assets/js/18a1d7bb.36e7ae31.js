"use strict";(globalThis.webpackChunkwebsite=globalThis.webpackChunkwebsite||[]).push([[5677],{556:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>c,contentTitle:()=>o,default:()=>h,frontMatter:()=>l,metadata:()=>r,toc:()=>d});const r=JSON.parse('{"id":"MONOREPO_RECOMMENDATIONS","title":"Monorepo & Documentation Strategy Recommendations","description":"Date Research-backed recommendations for Docusaurus","source":"@site/docs/MONOREPO_RECOMMENDATIONS.md","sourceDirName":".","slug":"/MONOREPO_RECOMMENDATIONS","permalink":"/chatline/docs/MONOREPO_RECOMMENDATIONS","draft":false,"unlisted":false,"editUrl":"https://github.com/nathanvale/chatline/tree/main/website/docs/MONOREPO_RECOMMENDATIONS.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"CLI","permalink":"/chatline/docs/cli-usage"},"next":{"title":"actionlint best practices","permalink":"/chatline/docs/actionlint-best-practices"}}');var i=s(6801),t=s(5705);const l={},o="Monorepo & Documentation Strategy Recommendations",c={},d=[{value:"Executive Summary",id:"executive-summary",level:2},{value:"Key Recommendation",id:"key-recommendation",level:3},{value:"1. Docusaurus Integration Strategy",id:"1-docusaurus-integration-strategy",level:2},{value:"Recommendation: Add Docusaurus to Current Repo",id:"recommendation-add-docusaurus-to-current-repo",level:3},{value:"2. pnpm Workspaces Strategy",id:"2-pnpm-workspaces-strategy",level:2},{value:"Current State: Single Package",id:"current-state-single-package",level:3},{value:"Recommendation: Defer Workspaces Until You Need Them",id:"recommendation-defer-workspaces-until-you-need-them",level:3},{value:"Future Migration Path (When Ready)",id:"future-migration-path-when-ready",level:3},{value:"3. TurboRepo Strategy",id:"3-turborepo-strategy",level:2},{value:"Recommendation: Start with pnpm Workspaces, Add TurboRepo Later",id:"recommendation-start-with-pnpm-workspaces-add-turborepo-later",level:3},{value:"Research-Backed Quote",id:"research-backed-quote",level:3},{value:"4. Git Template Strategy",id:"4-git-template-strategy",level:2},{value:"Recommendation: Flexible Single-Repo Template",id:"recommendation-flexible-single-repo-template",level:3},{value:"Template Structure",id:"template-structure",level:3},{value:"Key Principles",id:"key-principles",level:3},{value:"Best Practices from Research",id:"best-practices-from-research",level:3},{value:"Trunk-Based Development (GitOps Guide)",id:"trunk-based-development-gitops-guide",level:4},{value:"Repository Security (GitHub Docs)",id:"repository-security-github-docs",level:4},{value:"DRY Principle (GitOps Guide)",id:"dry-principle-gitops-guide",level:4},{value:"Separate Concerns",id:"separate-concerns",level:4},{value:"5. Immediate Action Plan",id:"5-immediate-action-plan",level:2},{value:"Phase 1: Add Docusaurus (Now)",id:"phase-1-add-docusaurus-now",level:3},{value:"Phase 2: Evaluate Workspaces (Later)",id:"phase-2-evaluate-workspaces-later",level:3},{value:"Phase 3: Scale with TurboRepo (Future)",id:"phase-3-scale-with-turborepo-future",level:3},{value:"6. Comparison Matrix",id:"6-comparison-matrix",level:2},{value:"7. Research Sources",id:"7-research-sources",level:2},{value:"8. Key Takeaways",id:"8-key-takeaways",level:2},{value:"For chatline Project",id:"for-chatline-project",level:3},{value:"For Git Template Strategy",id:"for-git-template-strategy",level:3},{value:"Architecture Philosophy",id:"architecture-philosophy",level:3},{value:"9. Next Steps",id:"9-next-steps",level:2}];function a(e){const n={a:"a",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"monorepo--documentation-strategy-recommendations",children:"Monorepo & Documentation Strategy Recommendations"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Date:"})," 2025-11-16 ",(0,i.jsx)(n.strong,{children:"Context:"})," Research-backed recommendations for Docusaurus\nintegration and potential monorepo structure"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"executive-summary",children:"Executive Summary"}),"\n",(0,i.jsx)(n.p,{children:"Based on comprehensive research of industry best practices, this document\nprovides recommendations for:"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Docusaurus Integration"})," - Add documentation site to current repo"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Workspace Strategy"})," - When to adopt pnpm workspaces"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Build Optimization"})," - When to add TurboRepo"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Git Template"})," - Flexible structure for single/mono repos"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"key-recommendation",children:"Key Recommendation"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Start simple, scale as needed:"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"\u2705 Add Docusaurus to current single-repo structure now"}),"\n",(0,i.jsx)(n.li,{children:"\u23f3 Defer pnpm workspaces until you have 2+ publishable packages"}),"\n",(0,i.jsx)(n.li,{children:"\u23f3 Defer TurboRepo until build performance becomes critical"}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"1-docusaurus-integration-strategy",children:"1. Docusaurus Integration Strategy"}),"\n",(0,i.jsx)(n.h3,{id:"recommendation-add-docusaurus-to-current-repo",children:"Recommendation: Add Docusaurus to Current Repo"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Why:"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Documentation lives with code (version controlled together)"}),"\n",(0,i.jsx)(n.li,{children:"Atomic commits for code + docs changes"}),"\n",(0,i.jsx)(n.li,{children:"Simplified maintenance (one repo to manage)"}),"\n",(0,i.jsx)(n.li,{children:"No additional repo complexity for current single-package project"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"How to Structure:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"chatline/\n\u251c\u2500\u2500 .changeset/\n\u251c\u2500\u2500 .github/\n\u251c\u2500\u2500 dist/\n\u251c\u2500\u2500 docs/                    # Existing markdown docs (keep as-is)\n\u2502   \u251c\u2500\u2500 releases/\n\u2502   \u251c\u2500\u2500 pre-release-guide.md\n\u2502   \u251c\u2500\u2500 release-channels.md\n\u2502   \u2514\u2500\u2500 ...\n\u251c\u2500\u2500 website/                 # NEW: Docusaurus site\n\u2502   \u251c\u2500\u2500 docs/               # Docusaurus docs (can link to ../docs/)\n\u2502   \u251c\u2500\u2500 blog/\n\u2502   \u251c\u2500\u2500 src/\n\u2502   \u251c\u2500\u2500 static/\n\u2502   \u251c\u2500\u2500 docusaurus.config.js\n\u2502   \u2514\u2500\u2500 package.json        # Docusaurus dependencies (sub-package)\n\u251c\u2500\u2500 src/\n\u251c\u2500\u2500 package.json            # Main package\n\u2514\u2500\u2500 README.md\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Implementation Steps:"})}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Initialize Docusaurus"})," (without workspaces):"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"npx create-docusaurus@latest website classic --typescript\n"})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsxs)(n.strong,{children:["Update ",(0,i.jsx)(n.code,{children:".gitignore"})]}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"# Docusaurus\nwebsite/.docusaurus/\nwebsite/.cache-loader/\nwebsite/build/\nwebsite/node_modules/\n"})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Add npm scripts"})," to root ",(0,i.jsx)(n.code,{children:"package.json"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "scripts": {\n    "docs:build": "cd website && npm run build",\n    "docs:dev": "cd website && npm start",\n    "docs:serve": "cd website && npm run serve"\n  }\n}\n'})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Configure Docusaurus"})," to use existing docs:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-js",children:"// website/docusaurus.config.js\nmodule.exports = {\n  presets: [\n    [\n      'classic',\n      {\n        docs: {\n          path: '../docs', // Point to existing docs folder\n          routeBasePath: 'docs',\n        },\n      },\n    ],\n  ],\n}\n"})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Add GitHub Pages deployment"})," (",(0,i.jsx)(n.code,{children:".github/workflows/docs.yml"}),"):"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:"name: Deploy Docs\non:\n  push:\n    branches: [main]\n    paths:\n      - 'docs/**'\n      - 'website/**'\njobs:\n  deploy:\n    runs-on: ubuntu-latest\n    steps:\n      - uses: actions/checkout@v4\n      - uses: actions/setup-node@v4\n      - run: cd website && npm ci && npm run build\n      - uses: peaceiris/actions-gh-pages@v3\n        with:\n          github_token: ${{ secrets.GITHUB_TOKEN }}\n          publish_dir: ./website/build\n"})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Benefits:"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"\u2705 Professional documentation site with search, versioning, and navigation"}),"\n",(0,i.jsxs)(n.li,{children:["\u2705 Keeps existing markdown docs in ",(0,i.jsx)(n.code,{children:"docs/"})," (no migration needed)"]}),"\n",(0,i.jsx)(n.li,{children:"\u2705 Minimal complexity (no workspaces required)"}),"\n",(0,i.jsx)(n.li,{children:"\u2705 Easy to deploy to GitHub Pages or Netlify"}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"2-pnpm-workspaces-strategy",children:"2. pnpm Workspaces Strategy"}),"\n",(0,i.jsx)(n.h3,{id:"current-state-single-package",children:"Current State: Single Package"}),"\n",(0,i.jsx)(n.p,{children:"Your project currently has:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["1 publishable package (",(0,i.jsx)(n.code,{children:"chatline"}),")"]}),"\n",(0,i.jsx)(n.li,{children:"Docusaurus would be a dev-only tool (not published)"}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"recommendation-defer-workspaces-until-you-need-them",children:"Recommendation: Defer Workspaces Until You Need Them"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"When to adopt pnpm workspaces:"})}),"\n",(0,i.jsxs)(n.p,{children:["\u2705 ",(0,i.jsx)(n.strong,{children:"Yes, use workspaces when:"})]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"You have 2+ publishable packages with shared dependencies"}),"\n",(0,i.jsx)(n.li,{children:"You want to split CLI tool from core library"}),"\n",(0,i.jsx)(n.li,{children:"You're building plugins/extensions architecture"}),"\n",(0,i.jsx)(n.li,{children:"You need to share TypeScript configs/tooling across packages"}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["\u274c ",(0,i.jsx)(n.strong,{children:"No, skip workspaces if:"})]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Single package project (current state)"}),"\n",(0,i.jsx)(n.li,{children:'Docusaurus is only additional "package" (dev tool only)'}),"\n",(0,i.jsx)(n.li,{children:"No immediate plans for multiple publishable packages"}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"future-migration-path-when-ready",children:"Future Migration Path (When Ready)"}),"\n",(0,i.jsx)(n.p,{children:"If you later decide to split into packages:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"chatline/                    # Monorepo root\n\u251c\u2500\u2500 .changeset/\n\u251c\u2500\u2500 .github/\n\u251c\u2500\u2500 pnpm-workspace.yaml              # NEW: Workspace config\n\u251c\u2500\u2500 package.json                     # Root package (scripts only)\n\u251c\u2500\u2500 packages/\n\u2502   \u251c\u2500\u2500 core/                        # @chatline/core\n\u2502   \u2502   \u251c\u2500\u2500 src/\n\u2502   \u2502   \u251c\u2500\u2500 package.json\n\u2502   \u2502   \u2514\u2500\u2500 tsconfig.json\n\u2502   \u251c\u2500\u2500 cli/                         # chatline (CLI)\n\u2502   \u2502   \u251c\u2500\u2500 src/\n\u2502   \u2502   \u251c\u2500\u2500 package.json\n\u2502   \u2502   \u2514\u2500\u2500 tsconfig.json\n\u2502   \u2514\u2500\u2500 utils/                       # @chatline/utils\n\u2502       \u251c\u2500\u2500 src/\n\u2502       \u251c\u2500\u2500 package.json\n\u2502       \u2514\u2500\u2500 tsconfig.json\n\u251c\u2500\u2500 apps/\n\u2502   \u2514\u2500\u2500 docs/                        # Docusaurus site\n\u2502       \u251c\u2500\u2500 docs/\n\u2502       \u251c\u2500\u2500 docusaurus.config.js\n\u2502       \u2514\u2500\u2500 package.json\n\u2514\u2500\u2500 README.md\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Migration script"})," (when ready):"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# 1. Create workspace structure\nmkdir -p packages/cli apps/docs\nmv src packages/cli/\nmv website apps/docs/\n\n# 2. Create pnpm-workspace.yaml\ncat > pnpm-workspace.yaml <<EOF\npackages:\n  - 'packages/*'\n  - 'apps/*'\nEOF\n\n# 3. Update package.json references\n# 4. Run: pnpm install\n"})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"3-turborepo-strategy",children:"3. TurboRepo Strategy"}),"\n",(0,i.jsx)(n.h3,{id:"recommendation-start-with-pnpm-workspaces-add-turborepo-later",children:"Recommendation: Start with pnpm Workspaces, Add TurboRepo Later"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Current verdict:"})," You don't need TurboRepo yet."]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Why:"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:'TurboRepo is "pnpm workspaces + build optimization"'}),"\n",(0,i.jsx)(n.li,{children:"Adds caching, task orchestration, and remote caching"}),"\n",(0,i.jsx)(n.li,{children:"Best for large monorepos with slow build times"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"When to add TurboRepo:"})}),"\n",(0,i.jsxs)(n.p,{children:["\u2705 ",(0,i.jsx)(n.strong,{children:"Yes, add TurboRepo when:"})]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Your builds take 5+ minutes"}),"\n",(0,i.jsx)(n.li,{children:"You have 5+ packages with complex dependency graphs"}),"\n",(0,i.jsx)(n.li,{children:"You want remote caching for CI/CD speedups"}),"\n",(0,i.jsx)(n.li,{children:"Your team has 10+ developers"}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["\u274c ",(0,i.jsx)(n.strong,{children:"No, defer TurboRepo if:"})]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Your builds complete in < 2 minutes"}),"\n",(0,i.jsx)(n.li,{children:"Single package or 2-3 simple packages"}),"\n",(0,i.jsx)(n.li,{children:"Team of 5 developers (current state)"}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"research-backed-quote",children:"Research-Backed Quote"}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsxs)(n.p,{children:['"PNPM is fast and space-efficient, ',(0,i.jsx)(n.strong,{children:"Turborepo is PNPM with build\noptimization"}),', and Nx is PNPM with build optimization, task orchestration,\nand additional features" \u2014\n',(0,i.jsx)(n.a,{href:"https://www.ekino.fr/publications/monorepo-insights-nx-turborepo-and-pnpm",children:"ekino.fr Monorepo Insights"})]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Performance Comparison:"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"pnpm alone: Excellent for dependency management, ~500% faster installs than\nnpm"}),"\n",(0,i.jsx)(n.li,{children:"pnpm + TurboRepo: Add 3-10x faster builds via caching"}),"\n",(0,i.jsx)(n.li,{children:"Cost: Additional configuration complexity"}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Future Setup"})," (when needed):"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"pnpm add -Dw turbo\n"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'// turbo.json\n{\n  "pipeline": {\n    "build": {\n      "dependsOn": ["^build"],\n      "outputs": ["dist/**"]\n    },\n    "test": {\n      "cache": false\n    }\n  }\n}\n'})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"4-git-template-strategy",children:"4. Git Template Strategy"}),"\n",(0,i.jsx)(n.h3,{id:"recommendation-flexible-single-repo-template",children:"Recommendation: Flexible Single-Repo Template"}),"\n",(0,i.jsxs)(n.p,{children:["Create a git template that works for both single and mono repos by using\n",(0,i.jsx)(n.strong,{children:"convention-based structure"})," and ",(0,i.jsx)(n.strong,{children:"optional workspace config"}),"."]}),"\n",(0,i.jsx)(n.h3,{id:"template-structure",children:"Template Structure"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"repo-template/\n\u251c\u2500\u2500 .changeset/\n\u2502   \u2514\u2500\u2500 config.json          # Works for single or multi-package\n\u251c\u2500\u2500 .github/\n\u2502   \u251c\u2500\u2500 workflows/\n\u2502   \u2502   \u251c\u2500\u2500 pr-quality.yml   # Lint, test, typecheck\n\u2502   \u2502   \u251c\u2500\u2500 changesets-manage-publish.yml\n\u2502   \u2502   \u251c\u2500\u2500 pre-mode.yml\n\u2502   \u2502   \u2514\u2500\u2500 alpha-snapshot.yml\n\u2502   \u2514\u2500\u2500 scripts/\n\u2502       \u2514\u2500\u2500 *.sh             # Reusable scripts\n\u251c\u2500\u2500 docs/                    # Always present (markdown docs)\n\u251c\u2500\u2500 src/                     # Single-repo: code here\n\u251c\u2500\u2500 packages/                # Mono-repo: code here (optional)\n\u251c\u2500\u2500 apps/                    # Mono-repo: apps here (optional)\n\u251c\u2500\u2500 pnpm-workspace.yaml      # Only if monorepo (gitignored by default)\n\u251c\u2500\u2500 package.json             # Always present\n\u251c\u2500\u2500 tsconfig.json\n\u2514\u2500\u2500 README.md\n"})}),"\n",(0,i.jsx)(n.h3,{id:"key-principles",children:"Key Principles"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"1. Convention over Configuration"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"src/"})," = single package source"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"packages/"})," = multiple packages (opt-in)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"apps/"})," = applications (opt-in)"]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"2. Progressive Enhancement"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Start: Single repo with ",(0,i.jsx)(n.code,{children:"src/"})]}),"\n",(0,i.jsxs)(n.li,{children:["Grow: Add ",(0,i.jsx)(n.code,{children:"packages/"})," and ",(0,i.jsx)(n.code,{children:"pnpm-workspace.yaml"})]}),"\n",(0,i.jsx)(n.li,{children:"Scale: Add TurboRepo when builds slow down"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"3. Workflow Compatibility"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Changesets works for single or multi-package"}),"\n",(0,i.jsx)(n.li,{children:"GitHub Actions detect structure automatically"}),"\n",(0,i.jsx)(n.li,{children:"Pre-release mode works regardless of structure"}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"best-practices-from-research",children:"Best Practices from Research"}),"\n",(0,i.jsx)(n.h4,{id:"trunk-based-development-gitops-guide",children:"Trunk-Based Development (GitOps Guide)"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["All development on ",(0,i.jsx)(n.code,{children:"main"})," branch"]}),"\n",(0,i.jsx)(n.li,{children:"Short-lived feature branches"}),"\n",(0,i.jsx)(n.li,{children:"Environments in directories, not branches"}),"\n",(0,i.jsx)(n.li,{children:"Clear audit trail and traceability"}),"\n"]}),"\n",(0,i.jsx)(n.h4,{id:"repository-security-github-docs",children:"Repository Security (GitHub Docs)"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Enable Dependabot alerts"}),"\n",(0,i.jsx)(n.li,{children:"Enable secret scanning and push protection"}),"\n",(0,i.jsx)(n.li,{children:"Enable code scanning (CodeQL)"}),"\n",(0,i.jsxs)(n.li,{children:["Add ",(0,i.jsx)(n.code,{children:"SECURITY.md"})," file"]}),"\n"]}),"\n",(0,i.jsx)(n.h4,{id:"dry-principle-gitops-guide",children:"DRY Principle (GitOps Guide)"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Use Kustomize/Helm patterns for configuration"}),"\n",(0,i.jsx)(n.li,{children:"Avoid duplicating YAML across environments"}),"\n",(0,i.jsx)(n.li,{children:"Leverage templating and patching tools"}),"\n"]}),"\n",(0,i.jsx)(n.h4,{id:"separate-concerns",children:"Separate Concerns"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Keep application code separate from configuration"}),"\n",(0,i.jsx)(n.li,{children:"Independent lifecycles for code and infrastructure"}),"\n",(0,i.jsx)(n.li,{children:"Decoupled approval processes"}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"5-immediate-action-plan",children:"5. Immediate Action Plan"}),"\n",(0,i.jsx)(n.h3,{id:"phase-1-add-docusaurus-now",children:"Phase 1: Add Docusaurus (Now)"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Why now:"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Improves project professionalism"}),"\n",(0,i.jsx)(n.li,{children:"Makes documentation discoverable"}),"\n",(0,i.jsx)(n.li,{children:"No structural changes required"}),"\n",(0,i.jsx)(n.li,{children:"Low risk, high value"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Tasks:"})}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["Initialize Docusaurus in ",(0,i.jsx)(n.code,{children:"website/"})," directory"]}),"\n",(0,i.jsxs)(n.li,{children:["Configure to use existing ",(0,i.jsx)(n.code,{children:"docs/"})," folder"]}),"\n",(0,i.jsx)(n.li,{children:"Add deployment workflow"}),"\n",(0,i.jsx)(n.li,{children:"Update README with docs link"}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Time estimate:"})," 2-4 hours"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h3,{id:"phase-2-evaluate-workspaces-later",children:"Phase 2: Evaluate Workspaces (Later)"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"When to revisit:"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"After 10+ npm packages published"}),"\n",(0,i.jsx)(n.li,{children:"When you split CLI from library"}),"\n",(0,i.jsx)(n.li,{children:"When shared TypeScript configs become painful"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Decision criteria:"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Do we have 2+ publishable packages? \u2192 Yes = Workspaces"}),"\n",(0,i.jsx)(n.li,{children:"Are builds taking 2+ minutes? \u2192 Yes = Consider TurboRepo"}),"\n",(0,i.jsx)(n.li,{children:"Is dependency management complex? \u2192 Yes = Workspaces"}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Time estimate:"})," 1-2 days (migration + testing)"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h3,{id:"phase-3-scale-with-turborepo-future",children:"Phase 3: Scale with TurboRepo (Future)"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"When to revisit:"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Builds exceed 5 minutes"}),"\n",(0,i.jsx)(n.li,{children:"Team grows beyond 10 developers"}),"\n",(0,i.jsx)(n.li,{children:"Need remote caching for CI/CD"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Decision criteria:"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Build performance is a bottleneck? \u2192 Yes = TurboRepo"}),"\n",(0,i.jsx)(n.li,{children:"Want to share cache across team? \u2192 Yes = TurboRepo"}),"\n",(0,i.jsx)(n.li,{children:"Need task orchestration? \u2192 Yes = TurboRepo"}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Time estimate:"})," 1-2 days (setup + optimization)"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"6-comparison-matrix",children:"6. Comparison Matrix"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Aspect"}),(0,i.jsx)(n.th,{children:"Current (Single Repo)"}),(0,i.jsx)(n.th,{children:"+ Docusaurus"}),(0,i.jsx)(n.th,{children:"+ Workspaces"}),(0,i.jsx)(n.th,{children:"+ TurboRepo"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"Packages"})}),(0,i.jsx)(n.td,{children:"1"}),(0,i.jsx)(n.td,{children:"1 + docs"}),(0,i.jsx)(n.td,{children:"2+"}),(0,i.jsx)(n.td,{children:"2+"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"Complexity"})}),(0,i.jsx)(n.td,{children:"Low"}),(0,i.jsx)(n.td,{children:"Low"}),(0,i.jsx)(n.td,{children:"Medium"}),(0,i.jsx)(n.td,{children:"Medium-High"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"Build Time"})}),(0,i.jsx)(n.td,{children:"~30s"}),(0,i.jsx)(n.td,{children:"~30s + 2min docs"}),(0,i.jsx)(n.td,{children:"~1-2min"}),(0,i.jsx)(n.td,{children:"~10-30s (cached)"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"Setup Time"})}),(0,i.jsx)(n.td,{children:"0"}),(0,i.jsx)(n.td,{children:"2-4h"}),(0,i.jsx)(n.td,{children:"1-2d"}),(0,i.jsx)(n.td,{children:"1-2d"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"Maintenance"})}),(0,i.jsx)(n.td,{children:"Low"}),(0,i.jsx)(n.td,{children:"Low"}),(0,i.jsx)(n.td,{children:"Medium"}),(0,i.jsx)(n.td,{children:"Medium"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"When to Use"})}),(0,i.jsx)(n.td,{children:"Always"}),(0,i.jsx)(n.td,{children:"Now"}),(0,i.jsx)(n.td,{children:"2+ packages"}),(0,i.jsx)(n.td,{children:"Slow builds"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"ROI"})}),(0,i.jsx)(n.td,{children:"N/A"}),(0,i.jsx)(n.td,{children:"High"}),(0,i.jsx)(n.td,{children:"Medium"}),(0,i.jsx)(n.td,{children:"High (at scale)"})]})]})]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"7-research-sources",children:"7. Research Sources"}),"\n",(0,i.jsx)(n.p,{children:"This document synthesizes research from:"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"pnpm Workspaces Architecture"}),"\n",(0,i.jsx)(n.a,{href:"https://jsdev.space/monorepo-pnpm/",children:"jsdev.space - Complete Monorepo Guide (2025)"})]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Content-addressable storage (CAS) architecture"}),"\n",(0,i.jsx)(n.li,{children:"Hard links vs symlinks"}),"\n",(0,i.jsx)(n.li,{children:"Topological sorting for dependency graphs"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"TurboRepo vs pnpm Comparison"}),"\n",(0,i.jsx)(n.a,{href:"https://www.ekino.fr/publications/monorepo-insights-nx-turborepo-and-pnpm",children:"ekino.fr - Monorepo Insights"})]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:'"TurboRepo = pnpm Workspace + Build Optimization"'}),"\n",(0,i.jsx)(n.li,{children:"Performance benchmarks"}),"\n",(0,i.jsx)(n.li,{children:"When to use each tool"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Docusaurus Monorepo Integration"}),"\n",(0,i.jsx)(n.a,{href:"https://turbo.build/repo/docs/crafting-your-repository/structuring-a-repository",children:"turborepo.com - Structuring a repository"})]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"apps/"})," and ",(0,i.jsx)(n.code,{children:"packages/"})," conventions"]}),"\n",(0,i.jsx)(n.li,{children:"Workspace setup patterns"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"GitOps Repository Patterns"}),"\n",(0,i.jsx)(n.a,{href:"https://medium.com/google-cloud/the-gitops-repository-structure-monorepo-vs-polyrepo-and-best-practices-17399ae6f3f4",children:"Medium - Monorepo vs Polyrepo Best Practices"})]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Trunk-based development"}),"\n",(0,i.jsx)(n.li,{children:"DRY principle for YAML"}),"\n",(0,i.jsx)(n.li,{children:"Security and governance"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"GitHub Repository Best Practices"}),"\n",(0,i.jsx)(n.a,{href:"https://docs.github.com/en/repositories/creating-and-managing-repositories/best-practices-for-repositories",children:"GitHub Docs - Best practices for repositories"})]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Security features (Dependabot, secret scanning, CodeQL)"}),"\n",(0,i.jsx)(n.li,{children:"Branching vs forking"}),"\n",(0,i.jsx)(n.li,{children:"Git LFS for large files"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Monorepo vs Multi-Repo Discussion"}),"\n",(0,i.jsx)(n.a,{href:"https://stackoverflow.com/questions/43634596/one-big-git-repo-or-multiple-smaller-ones",children:"Stack Overflow - One big Git repo or multiple smaller ones"})]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Real-world team experiences"}),"\n",(0,i.jsx)(n.li,{children:"CI/CD considerations"}),"\n",(0,i.jsx)(n.li,{children:"Submodule patterns"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"GitLab CI/CD for Monorepos"}),"\n",(0,i.jsx)(n.a,{href:"https://about.gitlab.com/blog/building-a-gitlab-ci-cd-pipeline-for-a-monorepo-the-easy-way/",children:"GitLab Blog - Building CI/CD for monorepo"})]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Conditional pipeline includes"}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"rules:changes"})," patterns"]}),"\n",(0,i.jsx)(n.li,{children:"Directory-based triggers"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"8-key-takeaways",children:"8. Key Takeaways"}),"\n",(0,i.jsx)(n.h3,{id:"for-chatline-project",children:"For chatline Project"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Add Docusaurus now"})," - High value, low complexity, no structural changes"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Keep single-repo structure"})," - No need for workspaces until you have\nmultiple packages"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Defer TurboRepo"})," - Build performance is not a bottleneck yet"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Design for flexibility"})," - Use conventions that scale (src/ \u2192 packages/ \u2192\napps/)"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"for-git-template-strategy",children:"For Git Template Strategy"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Convention-based structure"})," - ",(0,i.jsx)(n.code,{children:"src/"})," for single, ",(0,i.jsx)(n.code,{children:"packages/"})," for multi"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Progressive enhancement"})," - Start simple, add complexity as needed"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Workflow-agnostic"})," - Changesets + GitHub Actions work for both patterns"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Security-first"})," - Enable Dependabot, secret scanning, CodeQL from day 1"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"architecture-philosophy",children:"Architecture Philosophy"}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:'"Start with the simplest thing that could possibly work, then optimize when\nyou have data showing where the bottlenecks are."'}),"\n"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"\u2705 Single repo \u2192 Add Docusaurus \u2192 Evaluate workspaces \u2192 Consider TurboRepo"}),"\n",(0,i.jsx)(n.li,{children:"\u274c Jump straight to complex monorepo + TurboRepo setup"}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"9-next-steps",children:"9. Next Steps"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Review this document"})," - Discuss with team"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Decision: Add Docusaurus?"})," - If yes, follow Phase 1 plan"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Create template repo"})," - Set up flexible structure for future projects"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Document patterns"})," - Add to team knowledge base"]}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Last Updated:"})," 2025-11-16 ",(0,i.jsx)(n.strong,{children:"Status:"})," Recommendations ready for review\n",(0,i.jsx)(n.strong,{children:"Decision Required:"})," Proceed with Docusaurus integration?"]})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(a,{...e})}):a(e)}},5705:(e,n,s)=>{s.d(n,{R:()=>l,x:()=>o});var r=s(7701);const i={},t=r.createContext(i);function l(e){const n=r.useContext(t);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:l(e.components),r.createElement(t.Provider,{value:n},e.children)}}}]);