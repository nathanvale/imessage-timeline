"use strict";(globalThis.webpackChunkwebsite=globalThis.webpackChunkwebsite||[]).push([[3792],{5705:(e,n,t)=>{t.d(n,{R:()=>i,x:()=>o});var l=t(7701);const s={},r=l.createContext(s);function i(e){const n=l.useContext(r);return l.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:i(e.components),l.createElement(r.Provider,{value:n},e.children)}},6484:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>d,contentTitle:()=>o,default:()=>h,frontMatter:()=>i,metadata:()=>l,toc:()=>a});const l=JSON.parse('{"id":"diagrams/pre-mode-workflow-simple","title":"Pre-Mode Workflow (Simple Visual)","description":"When to Use Which Workflow","source":"@site/docs/diagrams/pre-mode-workflow-simple.md","sourceDirName":"diagrams","slug":"/diagrams/pre-mode-workflow-simple","permalink":"/chatline/docs/diagrams/pre-mode-workflow-simple","draft":false,"unlisted":false,"editUrl":"https://github.com/nathanvale/chatline/tree/main/website/docs/diagrams/pre-mode-workflow-simple.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"dependency-maintenance","permalink":"/chatline/docs/dependency-maintenance"},"next":{"title":"Dual-Mode Distribution Best Practices","permalink":"/chatline/docs/dual-mode-distribution-best-practices"}}');var s=t(6801),r=t(5705);const i={},o="Pre-Mode Workflow (Simple Visual)",d={},a=[{value:"When to Use Which Workflow",id:"when-to-use-which-workflow",level:2},{value:"Quick Reference",id:"quick-reference",level:2},{value:"Decision Tree: Which Workflow?",id:"decision-tree-which-workflow",level:2},{value:"Simple Rules",id:"simple-rules",level:2},{value:"Use pre-mode.yml when:",id:"use-pre-modeyml-when",level:3},{value:"Use channel-release.yml when:",id:"use-channel-releaseyml-when",level:3},{value:"Common Mistakes (Avoid These!)",id:"common-mistakes-avoid-these",level:2},{value:"Example: Full Beta Cycle",id:"example-full-beta-cycle",level:2},{value:"Troubleshooting",id:"troubleshooting",level:2},{value:"&quot;I&#39;m in pre-mode but can&#39;t publish&quot;",id:"im-in-pre-mode-but-cant-publish",level:3},{value:"&quot;I want to exit pre-mode but nothing happened&quot;",id:"i-want-to-exit-pre-mode-but-nothing-happened",level:3},{value:"&quot;My PR doesn&#39;t have changesets&quot;",id:"my-pr-doesnt-have-changesets",level:3},{value:"&quot;I ran channel-release.yml but I&#39;m not in pre-mode&quot;",id:"i-ran-channel-releaseyml-but-im-not-in-pre-mode",level:3},{value:"Visual Workflow States",id:"visual-workflow-states",level:2},{value:"How to Check Current Mode",id:"how-to-check-current-mode",level:2},{value:"Related Documentation",id:"related-documentation",level:2}];function c(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"pre-mode-workflow-simple-visual",children:"Pre-Mode Workflow (Simple Visual)"})}),"\n",(0,s.jsx)(n.h2,{id:"when-to-use-which-workflow",children:"When to Use Which Workflow"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502  Do you want to start beta testing?     \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n               \u2502\n               \u25bc\n     \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n     \u2502  Run: pre-mode.yml  \u2502\n     \u2502  Action: enter      \u2502\n     \u2502  Channel: beta      \u2502\n     \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                \u2502\n                \u25bc\n      \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n      \u2502  Review & Merge PR \u2502\n      \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                 \u2502\n                 \u25bc\n    \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n    \u2502  Make changes, merge PRs   \u2502\n    \u2502  (changesets auto-created) \u2502\n    \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n               \u2502\n               \u25bc\n     \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n     \u2502  Need to publish?     \u2502\n     \u2502  Run:                 \u2502\n     \u2502  channel-release.yml  \u2502\n     \u2502  Intent: version      \u2502\n     \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                \u2502\n                \u25bc\n     \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n     \u2502  channel-release.yml   \u2502\n     \u2502  Intent: publish       \u2502\n     \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                \u2502\n                \u25bc\n       \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n       \u2502  Beta published! \u2502\n       \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                  \u2502\n                  \u25bc\n        \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n        \u2502  Ready for stable?   \u2502\n        \u2502  Run: pre-mode.yml   \u2502\n        \u2502  Action: exit        \u2502\n        \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                   \u2502\n                   \u25bc\n          \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n          \u2502  Review & merge \u2502\n          \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                     \u2502\n                     \u25bc\n            \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n            \u2502  Stable release! \u2502\n            \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n"})}),"\n",(0,s.jsx)(n.h2,{id:"quick-reference",children:"Quick Reference"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Task"}),(0,s.jsx)(n.th,{children:"Workflow"}),(0,s.jsx)(n.th,{children:"Action/Intent"}),(0,s.jsx)(n.th,{children:"Creates PR?"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Start beta testing"}),(0,s.jsx)(n.td,{children:"pre-mode.yml"}),(0,s.jsx)(n.td,{children:"action=enter, channel=beta"}),(0,s.jsx)(n.td,{children:"YES"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Update beta versions"}),(0,s.jsx)(n.td,{children:"channel-release.yml"}),(0,s.jsx)(n.td,{children:"intent=version"}),(0,s.jsx)(n.td,{children:"NO"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Publish to beta"}),(0,s.jsx)(n.td,{children:"channel-release.yml"}),(0,s.jsx)(n.td,{children:"intent=publish"}),(0,s.jsx)(n.td,{children:"NO"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Quick test snapshot"}),(0,s.jsx)(n.td,{children:"channel-release.yml"}),(0,s.jsx)(n.td,{children:"intent=snapshot"}),(0,s.jsx)(n.td,{children:"NO"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"End beta testing"}),(0,s.jsx)(n.td,{children:"pre-mode.yml"}),(0,s.jsx)(n.td,{children:"action=exit"}),(0,s.jsx)(n.td,{children:"YES"})]})]})]}),"\n",(0,s.jsx)(n.h2,{id:"decision-tree-which-workflow",children:"Decision Tree: Which Workflow?"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502  What do you want to do?       \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n             \u2502\n      \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n      \u2502                           \u2502\n      \u25bc                           \u25bc\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510        \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 Enter or     \u2502        \u2502 Version, publish,\u2502\n\u2502 exit         \u2502        \u2502 or snapshot      \u2502\n\u2502 pre-mode?    \u2502        \u2502 packages?        \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518        \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n       \u2502                         \u2502\n       \u25bc                         \u25bc\n  pre-mode.yml           channel-release.yml\n"})}),"\n",(0,s.jsx)(n.h2,{id:"simple-rules",children:"Simple Rules"}),"\n",(0,s.jsx)(n.h3,{id:"use-pre-modeyml-when",children:"Use pre-mode.yml when:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Starting a beta/rc/next cycle"}),"\n",(0,s.jsx)(n.li,{children:"Ending a beta/rc/next cycle"}),"\n",(0,s.jsx)(n.li,{children:"You want a PR for review"}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"use-channel-releaseyml-when",children:"Use channel-release.yml when:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Already in pre-mode"}),"\n",(0,s.jsx)(n.li,{children:"Need to bump versions"}),"\n",(0,s.jsx)(n.li,{children:"Need to publish packages"}),"\n",(0,s.jsx)(n.li,{children:"Need a quick canary snapshot"}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"common-mistakes-avoid-these",children:"Common Mistakes (Avoid These!)"}),"\n",(0,s.jsxs)(n.p,{children:["\u274c ",(0,s.jsx)(n.strong,{children:"WRONG:"})," Using channel-release.yml to enter pre-mode \u2705 ",(0,s.jsx)(n.strong,{children:"RIGHT:"})," Using\npre-mode.yml to enter pre-mode"]}),"\n",(0,s.jsxs)(n.p,{children:["\u274c ",(0,s.jsx)(n.strong,{children:"WRONG:"})," Trying to version before entering pre-mode \u2705 ",(0,s.jsx)(n.strong,{children:"RIGHT:"})," Enter\npre-mode first, then version"]}),"\n",(0,s.jsxs)(n.p,{children:["\u274c ",(0,s.jsx)(n.strong,{children:"WRONG:"})," Manually editing .changeset/pre.json \u2705 ",(0,s.jsx)(n.strong,{children:"RIGHT:"})," Let the\nworkflows handle pre-mode files"]}),"\n",(0,s.jsx)(n.h2,{id:"example-full-beta-cycle",children:"Example: Full Beta Cycle"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"Step 1: START BETA\n\u2192 GitHub Actions \u2192 pre-mode.yml\n\u2192 Inputs:\n  - action: enter\n  - channel: beta\n\u2192 Result: PR created\n\u2192 Review PR \u2192 Merge PR\n\u2192 Status: In beta mode \u2705\n\nStep 2: MAKE CHANGES\n\u2192 Create feature branch\n\u2192 Make changes\n\u2192 Open PR to main\n\u2192 Merge PR\n\u2192 Changesets created automatically\n\nStep 3: BUMP VERSIONS\n\u2192 GitHub Actions \u2192 channel-release.yml\n\u2192 Inputs:\n  - channel: beta\n  - intent: version\n\u2192 Result: Versions bumped (1.0.0-beta.0, 1.0.0-beta.1, etc.)\n\nStep 4: PUBLISH TO NPM\n\u2192 GitHub Actions \u2192 channel-release.yml\n\u2192 Inputs:\n  - channel: beta\n  - intent: publish\n\u2192 Result: Published to npm with @beta tag\n\u2192 Users can install: npm install your-package@beta\n\nStep 5: REPEAT 2-4 AS NEEDED\n\u2192 More changes \u2192 version \u2192 publish\n\nStep 6: END BETA\n\u2192 GitHub Actions \u2192 pre-mode.yml\n\u2192 Inputs:\n  - action: exit\n\u2192 Result: PR created\n\u2192 Review PR \u2192 Merge PR\n\u2192 Status: Out of beta mode \u2705\n\nStep 7: STABLE RELEASE\n\u2192 Normal release workflow takes over\n\u2192 Publishes to npm with @latest tag\n"})}),"\n",(0,s.jsx)(n.h2,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,s.jsx)(n.h3,{id:"im-in-pre-mode-but-cant-publish",children:"\"I'm in pre-mode but can't publish\""}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Check:"})," Did you run ",(0,s.jsx)(n.code,{children:"version"})," before ",(0,s.jsx)(n.code,{children:"publish"}),"? ",(0,s.jsx)(n.strong,{children:"Fix:"})," Run\nchannel-release.yml with intent=version first"]}),"\n",(0,s.jsx)(n.h3,{id:"i-want-to-exit-pre-mode-but-nothing-happened",children:'"I want to exit pre-mode but nothing happened"'}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Check:"})," Did you merge the PR created by pre-mode.yml? ",(0,s.jsx)(n.strong,{children:"Fix:"})," Find and merge\nthe PR with label ",(0,s.jsx)(n.code,{children:"release:pre-toggle"})]}),"\n",(0,s.jsx)(n.h3,{id:"my-pr-doesnt-have-changesets",children:'"My PR doesn\'t have changesets"'}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Don't worry!"})," The bot creates them automatically from your PR title. Use\nconventional commits: ",(0,s.jsx)(n.code,{children:"feat:"}),", ",(0,s.jsx)(n.code,{children:"fix:"}),", ",(0,s.jsx)(n.code,{children:"refactor!:"})]}),"\n",(0,s.jsx)(n.h3,{id:"i-ran-channel-releaseyml-but-im-not-in-pre-mode",children:'"I ran channel-release.yml but I\'m not in pre-mode"'}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Problem:"})," You tried to version/publish before entering pre-mode ",(0,s.jsx)(n.strong,{children:"Fix:"})," Run\npre-mode.yml with action=enter first"]}),"\n",(0,s.jsx)(n.h2,{id:"visual-workflow-states",children:"Visual Workflow States"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502   STABLE    \u2502  Normal development on main\n\u2502   MODE      \u2502  Use standard PR workflow\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n       \u2502\n       \u2502 pre-mode.yml (enter) \u2192 PR \u2192 Merge\n       \u25bc\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502  PRE-MODE   \u2502  Beta/RC/Next testing\n\u2502   ACTIVE    \u2502  Use channel-release.yml for version/publish\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n       \u2502\n       \u2502 pre-mode.yml (exit) \u2192 PR \u2192 Merge\n       \u25bc\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502   STABLE    \u2502  Back to normal development\n\u2502   MODE      \u2502  Ready for stable release\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n"})}),"\n",(0,s.jsx)(n.h2,{id:"how-to-check-current-mode",children:"How to Check Current Mode"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:'# Look at .changeset/pre.json\ncat .changeset/pre.json\n\n# If file exists and has content \u2192 in pre-mode\n# If file doesn\'t exist or is empty \u2192 stable mode\n\n# Example pre-mode file:\n{\n  "mode": "pre",\n  "tag": "beta",\n  "initialVersions": { ... },\n  "changesets": [ ... ]\n}\n'})}),"\n",(0,s.jsx)(n.h2,{id:"related-documentation",children:"Related Documentation"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Full details: ",(0,s.jsx)(n.code,{children:"docs/release-channels.md"})]}),"\n",(0,s.jsxs)(n.li,{children:["Canonical flow: ",(0,s.jsx)(n.code,{children:"docs/releases/changesets-canonical.md"})]}),"\n",(0,s.jsxs)(n.li,{children:["Consolidation plan: ",(0,s.jsx)(n.code,{children:"docs/pre-mode-consolidation-plan.md"})]}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Created:"})," 2025-11-14 ",(0,s.jsx)(n.strong,{children:"Keep it simple. One workflow for mode changes. One\nworkflow for operations."})]})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(c,{...e})}):c(e)}}}]);