"use strict";(globalThis.webpackChunkwebsite=globalThis.webpackChunkwebsite||[]).push([[6090],{5705:(e,n,s)=>{s.d(n,{R:()=>l,x:()=>a});var i=s(7701);const r={},t=i.createContext(r);function l(e){const n=i.useContext(t);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:l(e.components),i.createElement(t.Provider,{value:n},e.children)}},8551:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>d,contentTitle:()=>a,default:()=>h,frontMatter:()=>l,metadata:()=>i,toc:()=>c});const i=JSON.parse('{"id":"imessage-pipeline-enhancements-spec","title":"iMessage Pipeline Enhancements Specification","description":"Version 2025-10-19 Status","source":"@site/docs/imessage-pipeline-enhancements-spec.md","sourceDirName":".","slug":"/imessage-pipeline-enhancements-spec","permalink":"/imessage-timeline/docs/imessage-pipeline-enhancements-spec","draft":false,"unlisted":false,"editUrl":"https://github.com/nathanvale/imessage-timeline/tree/main/website/docs/imessage-pipeline-enhancements-spec.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Emergency Rollback Procedure","permalink":"/imessage-timeline/docs/emergency-rollback-procedure"},"next":{"title":"iMessage Pipeline Implementation Summary","permalink":"/imessage-timeline/docs/imessage-pipeline-implementation-summary"}}');var r=s(6801),t=s(5705);const l={},a="iMessage Pipeline Enhancements Specification",d={},c=[{value:"Overview",id:"overview",level:2},{value:"1. CLI Interface Enhancement",id:"1-cli-interface-enhancement",level:2},{value:"1.1 Overview",id:"11-overview",level:3},{value:"1.2 Task Breakdown",id:"12-task-breakdown",level:3},{value:"CLI--T01: Setup Commander.js Structure",id:"cli--t01-setup-commanderjs-structure",level:4},{value:"CLI--T02: Implement Ingest Commands",id:"cli--t02-implement-ingest-commands",level:4},{value:"CLI--T03: Implement Normalize and Enrich Commands",id:"cli--t03-implement-normalize-and-enrich-commands",level:4},{value:"CLI--T04: Implement Render Command",id:"cli--t04-implement-render-command",level:4},{value:"CLI--T05: Add Helper Commands",id:"cli--t05-add-helper-commands",level:4},{value:"1.3 Technical Implementation",id:"13-technical-implementation",level:3},{value:"2. Configuration File Support",id:"2-configuration-file-support",level:2},{value:"2.1 Overview",id:"21-overview",level:3},{value:"2.2 Task Breakdown",id:"22-task-breakdown",level:3},{value:"CONFIG--T01: Define Config Schema",id:"config--t01-define-config-schema",level:4},{value:"CONFIG--T02: Implement Config Loader",id:"config--t02-implement-config-loader",level:4},{value:"CONFIG--T03: Add Config Generation Command",id:"config--t03-add-config-generation-command",level:4},{value:"3. Progress Indicators",id:"3-progress-indicators",level:2},{value:"3.1 Overview",id:"31-overview",level:3},{value:"3.2 Task Breakdown",id:"32-task-breakdown",level:3},{value:"PROGRESS--T01: Install and Configure Progress Library",id:"progress--t01-install-and-configure-progress-library",level:4},{value:"PROGRESS--T02: Add Progress to Enrichment",id:"progress--t02-add-progress-to-enrichment",level:4},{value:"PROGRESS--T03: Add Progress to Other Stages",id:"progress--t03-add-progress-to-other-stages",level:4},{value:"4. Incremental Mode",id:"4-incremental-mode",level:2},{value:"4.1 Overview",id:"41-overview",level:3},{value:"4.2 Task Breakdown",id:"42-task-breakdown",level:3},{value:"INCREMENTAL--T01: Create State Tracking",id:"incremental--t01-create-state-tracking",level:4},{value:"INCREMENTAL--T02: Implement Delta Detection",id:"incremental--t02-implement-delta-detection",level:4},{value:"INCREMENTAL--T03: Add Merge Strategy",id:"incremental--t03-add-merge-strategy",level:4},{value:"INCREMENTAL--T04: Add CLI Integration",id:"incremental--t04-add-cli-integration",level:4},{value:"Task Summary",id:"task-summary",level:2},{value:"Epic E7: Production-Ready (18 tasks)",id:"epic-e7-production-ready-18-tasks",level:3},{value:"Risk Breakdown",id:"risk-breakdown",level:3},{value:"Dependencies",id:"dependencies",level:2},{value:"Testing Strategy",id:"testing-strategy",level:2},{value:"Unit Tests",id:"unit-tests",level:3},{value:"Integration Tests",id:"integration-tests",level:3},{value:"Manual Testing",id:"manual-testing",level:3},{value:"Documentation Updates",id:"documentation-updates",level:2},{value:"Future Enhancements (Beyond E7)",id:"future-enhancements-beyond-e7",level:2}];function o(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"imessage-pipeline-enhancements-specification",children:"iMessage Pipeline Enhancements Specification"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Version"}),": 1.0 ",(0,r.jsx)(n.strong,{children:"Created"}),": 2025-10-19 ",(0,r.jsx)(n.strong,{children:"Status"}),": Proposed ",(0,r.jsx)(n.strong,{children:"Epic"}),":\nE7-Production-Ready"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,r.jsx)(n.p,{children:"This specification covers 4 major enhancements to make the iMessage pipeline\nproduction-ready:"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"CLI Interface"})," - Full commander.js integration with proper argument\nparsing"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Configuration File"})," - YAML/JSON config support with validation"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Progress Indicators"})," - Terminal progress bars for long-running operations"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Incremental Mode"})," - Delta enrichment (only new messages since last run)"]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Dependencies"}),": All E1-E6 epics complete (30/30 tasks)"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"1-cli-interface-enhancement",children:"1. CLI Interface Enhancement"}),"\n",(0,r.jsx)(n.h3,{id:"11-overview",children:"1.1 Overview"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Current State"}),": Minimal CLI stub at ",(0,r.jsx)(n.code,{children:"src/cli.ts"})," ",(0,r.jsx)(n.strong,{children:"Goal"}),": Full-featured CLI\nwith commander.js, subcommands, and proper error handling"]}),"\n",(0,r.jsx)(n.h3,{id:"12-task-breakdown",children:"1.2 Task Breakdown"}),"\n",(0,r.jsx)(n.h4,{id:"cli--t01-setup-commanderjs-structure",children:"CLI--T01: Setup Commander.js Structure"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Risk"}),": LOW | ",(0,r.jsx)(n.strong,{children:"Estimated"}),": 1 day"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Description"}),": Implement main CLI entry point with commander.js framework."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Acceptance Criteria"}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"CLI-T01-AC01"}),": Install commander.js and @types/commander"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"CLI-T01-AC02"}),": Create main program with version, description, and global\noptions"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"CLI-T01-AC03"}),": Global options: ",(0,r.jsx)(n.code,{children:"--verbose"}),", ",(0,r.jsx)(n.code,{children:"--quiet"}),", ",(0,r.jsx)(n.code,{children:"--config <path>"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"CLI-T01-AC04"}),": Proper exit codes: 0 (success), 1 (validation error), 2\n(runtime error)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"CLI-T01-AC05"}),": Top-level error handler with user-friendly messages"]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Example Usage"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"imessage-timeline --version\n# 1.0.0\n\nimessage-timeline --help\n# Usage: imessage-timeline [options] [command]\n#\n# Extract, transform, and analyze iMessage conversations\n#\n# Options:\n#   -V, --version          output the version number\n#   -c, --config <path>    config file path (default: imessage-config.json)\n#   -v, --verbose          verbose logging\n#   -q, --quiet            suppress non-error output\n#   -h, --help             display help for command\n"})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h4,{id:"cli--t02-implement-ingest-commands",children:"CLI--T02: Implement Ingest Commands"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Risk"}),": MEDIUM | ",(0,r.jsx)(n.strong,{children:"Estimated"}),": 2 days"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Description"}),": Create ",(0,r.jsx)(n.code,{children:"ingest-csv"})," and ",(0,r.jsx)(n.code,{children:"ingest-db"})," subcommands."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Acceptance Criteria"}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"CLI-T02-AC01"}),": ",(0,r.jsx)(n.code,{children:"ingest-csv"})," command with all options from usage guide"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"CLI-T02-AC02"}),": ",(0,r.jsx)(n.code,{children:"ingest-db"})," command with database path and contact filtering"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"CLI-T02-AC03"}),": Attachment root validation (check directories exist)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"CLI-T02-AC04"}),": Input file validation with clear error messages"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"CLI-T02-AC05"}),': Progress output: "\u2713 Parsed 2,847 messages from CSV"']}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Command Structure"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"imessage-timeline ingest-csv \\\n  --input <path> \\\n  --output <path> \\\n  --attachment-roots <path1> <path2> \\\n  [--verbose]\n\nimessage-timeline ingest-db \\\n  --db-path <path> \\\n  --output <path> \\\n  --contact <identifier> \\\n  --date-range <start:end> \\\n  --attachment-roots <path1> <path2> \\\n  [--verbose]\n"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Validation"}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Input file exists and is readable"}),"\n",(0,r.jsx)(n.li,{children:"Attachment roots are directories"}),"\n",(0,r.jsxs)(n.li,{children:["Date range format: ",(0,r.jsx)(n.code,{children:"YYYY-MM-DD:YYYY-MM-DD"})]}),"\n",(0,r.jsx)(n.li,{children:"Output directory is writable"}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h4,{id:"cli--t03-implement-normalize-and-enrich-commands",children:"CLI--T03: Implement Normalize and Enrich Commands"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Risk"}),": HIGH | ",(0,r.jsx)(n.strong,{children:"Estimated"}),": 3 days"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Description"}),": Create ",(0,r.jsx)(n.code,{children:"normalize-link"})," and ",(0,r.jsx)(n.code,{children:"enrich-ai"})," subcommands with full\noption support."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Acceptance Criteria"}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"CLI-T03-AC01"}),": ",(0,r.jsx)(n.code,{children:"normalize-link"})," with merge mode support"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"CLI-T03-AC02"}),": ",(0,r.jsx)(n.code,{children:"enrich-ai"})," with checkpoint/resume options"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"CLI-T03-AC03"}),": Rate limiting options: ",(0,r.jsx)(n.code,{children:"--rate-limit <ms>"}),",\n",(0,r.jsx)(n.code,{children:"--max-retries <n>"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"CLI-T03-AC04"}),": Enrichment toggles: ",(0,r.jsx)(n.code,{children:"--enable-vision"}),", ",(0,r.jsx)(n.code,{children:"--enable-audio"}),",\n",(0,r.jsx)(n.code,{children:"--enable-links"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"CLI-T03-AC05"}),": Resume flag: ",(0,r.jsx)(n.code,{children:"--resume"})," loads last checkpoint automatically"]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Command Structure"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"imessage-timeline normalize-link \\\n  --input <path> \\\n  --output <path> \\\n  [--merge-csv-db] \\\n  [--csv-input <path>] \\\n  [--db-input <path>] \\\n  [--verbose]\n\nimessage-timeline enrich-ai \\\n  --input <path> \\\n  --output <path> \\\n  [--checkpoint-interval <n>] \\\n  [--resume] \\\n  [--force-refresh] \\\n  [--rate-limit <ms>] \\\n  [--max-retries <n>] \\\n  [--gemini-api-key <key>] \\\n  [--enable-vision] \\\n  [--enable-audio] \\\n  [--enable-links] \\\n  [--image-cache-dir <path>]\n"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Resume Logic"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"// If --resume flag provided:\n// 1. Check for checkpoint in ./checkpoints/enrich-checkpoint-latest.json\n// 2. Verify config hash matches current config\n// 3. Resume from lastProcessedIndex + 1\n// 4. If no checkpoint found, start from beginning\n"})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h4,{id:"cli--t04-implement-render-command",children:"CLI--T04: Implement Render Command"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Risk"}),": LOW | ",(0,r.jsx)(n.strong,{children:"Estimated"}),": 1 day"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Description"}),": Create ",(0,r.jsx)(n.code,{children:"render-markdown"})," subcommand."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Acceptance Criteria"}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"CLI-T04-AC01"}),": ",(0,r.jsx)(n.code,{children:"render-markdown"})," with date filtering options"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"CLI-T04-AC02"}),": Grouping toggles: ",(0,r.jsx)(n.code,{children:"--group-by-time"}),", ",(0,r.jsx)(n.code,{children:"--nested-replies"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"CLI-T04-AC03"}),": Max nesting depth: ",(0,r.jsx)(n.code,{children:"--max-nesting-depth <n>"})," (default 10)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"CLI-T04-AC04"}),": Output directory creation if doesn't exist"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"CLI-T04-AC05"}),': Summary output: "\u2713 Wrote 92 markdown files to ./timeline/"']}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Command Structure"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"imessage-timeline render-markdown \\\n  --input <path> \\\n  --output-dir <path> \\\n  [--date-range <start:end>] \\\n  [--group-by-time] \\\n  [--nested-replies] \\\n  [--max-nesting-depth <n>]\n"})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h4,{id:"cli--t05-add-helper-commands",children:"CLI--T05: Add Helper Commands"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Risk"}),": LOW | ",(0,r.jsx)(n.strong,{children:"Estimated"}),": 1 day"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Description"}),": Utility commands for validation, stats, and cleanup."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Acceptance Criteria"}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"CLI-T05-AC01"}),": ",(0,r.jsx)(n.code,{children:"validate"})," command to check JSON against schema"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"CLI-T05-AC02"}),": ",(0,r.jsx)(n.code,{children:"stats"})," command to show message counts by type"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"CLI-T05-AC03"}),": ",(0,r.jsx)(n.code,{children:"clean"})," command to remove checkpoints and temp files"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"CLI-T05-AC04"}),": ",(0,r.jsx)(n.code,{children:"doctor"})," command to diagnose common issues"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"CLI-T05-AC05"}),": Each helper has ",(0,r.jsx)(n.code,{children:"--help"})," with examples"]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Command Structure"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Validate JSON structure\nimessage-timeline validate <file>\n\n# Show statistics\nimessage-timeline stats <file>\n# Output:\n# Total messages: 3,098\n# By kind: text (2,275), media (823), tapback (234), notification (12)\n# Date range: 2024-01-01 to 2024-12-31\n\n# Clean up temporary files\nimessage-timeline clean [--checkpoints] [--cache] [--all]\n\n# Diagnose issues\nimessage-timeline doctor\n# Checks:\n# \u2713 Node.js version >= 22.20\n# \u2713 pnpm installed\n# \u2713 GEMINI_API_KEY set\n# \u26a0 FIRECRAWL_API_KEY not set (optional)\n# \u2713 Attachment roots exist\n"})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"13-technical-implementation",children:"1.3 Technical Implementation"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"File Structure"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"src/\n\u251c\u2500\u2500 cli.ts                    # Main entry point\n\u251c\u2500\u2500 cli/\n\u2502   \u251c\u2500\u2500 commands/\n\u2502   \u2502   \u251c\u2500\u2500 ingest-csv.ts\n\u2502   \u2502   \u251c\u2500\u2500 ingest-db.ts\n\u2502   \u2502   \u251c\u2500\u2500 normalize-link.ts\n\u2502   \u2502   \u251c\u2500\u2500 enrich-ai.ts\n\u2502   \u2502   \u251c\u2500\u2500 render-markdown.ts\n\u2502   \u2502   \u251c\u2500\u2500 validate.ts\n\u2502   \u2502   \u251c\u2500\u2500 stats.ts\n\u2502   \u2502   \u251c\u2500\u2500 clean.ts\n\u2502   \u2502   \u2514\u2500\u2500 doctor.ts\n\u2502   \u251c\u2500\u2500 utils/\n\u2502   \u2502   \u251c\u2500\u2500 validators.ts     # Input validation\n\u2502   \u2502   \u251c\u2500\u2500 formatters.ts     # Output formatting\n\u2502   \u2502   \u2514\u2500\u2500 errors.ts         # Error handling\n\u2502   \u2514\u2500\u2500 types.ts              # CLI types\n"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Main CLI Structure"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"// src/cli.ts\nimport { Command } from 'commander'\nimport { ingestCsvCommand } from './cli/commands/ingest-csv'\nimport { enrichAiCommand } from './cli/commands/enrich-ai'\n// ... other imports\n\nconst program = new Command()\n\nprogram\n  .name('imessage-timeline')\n  .version('1.0.0')\n  .description('Extract, transform, and analyze iMessage conversations')\n  .option('-c, --config <path>', 'config file path', 'imessage-config.json')\n  .option('-v, --verbose', 'verbose logging', false)\n  .option('-q, --quiet', 'suppress non-error output', false)\n\n// Register subcommands\nprogram.addCommand(ingestCsvCommand)\nprogram.addCommand(enrichAiCommand)\n// ... other commands\n\n// Global error handler\nprogram.exitOverride((err) => {\n  if (err.code === 'commander.help') process.exit(0)\n  if (err.code === 'commander.version') process.exit(0)\n\n  console.error(`Error: ${err.message}`)\n  process.exit(err.exitCode || 1)\n})\n\nawait program.parseAsync()\n"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Command Template"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"// src/cli/commands/enrich-ai.ts\nimport { Command } from 'commander'\nimport { enrichMessages } from '#enrich/index'\n\nexport const enrichAiCommand = new Command('enrich-ai')\n  .description('Add AI-powered enrichment to messages')\n  .requiredOption('--input <path>', 'input JSON file')\n  .requiredOption('--output <path>', 'output JSON file')\n  .option('--checkpoint-interval <n>', 'checkpoint interval', '100')\n  .option('--resume', 'resume from last checkpoint', false)\n  .option('--rate-limit <ms>', 'delay between API calls', '1000')\n  .action(async (options) => {\n    try {\n      // Validate inputs\n      await validateInputFile(options.input)\n\n      // Load config\n      const config = await loadConfig(options.config)\n\n      // Run enrichment\n      const result = await enrichMessages({\n        input: options.input,\n        output: options.output,\n        checkpointInterval: parseInt(options.checkpointInterval),\n        resume: options.resume,\n        rateLimitDelay: parseInt(options.rateLimit),\n        ...config,\n      })\n\n      // Output summary\n      console.log(`\u2713 Enriched ${result.processedCount} messages`)\n      console.log(`\u2713 Wrote ${options.output}`)\n    } catch (error) {\n      console.error(`Error: ${error.message}`)\n      process.exit(1)\n    }\n  })\n"})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"2-configuration-file-support",children:"2. Configuration File Support"}),"\n",(0,r.jsx)(n.h3,{id:"21-overview",children:"2.1 Overview"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Goal"}),": Load settings from YAML/JSON config files with schema validation"]}),"\n",(0,r.jsx)(n.h3,{id:"22-task-breakdown",children:"2.2 Task Breakdown"}),"\n",(0,r.jsx)(n.h4,{id:"config--t01-define-config-schema",children:"CONFIG--T01: Define Config Schema"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Risk"}),": LOW | ",(0,r.jsx)(n.strong,{children:"Estimated"}),": 1 day"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Description"}),": Create Zod schema for configuration with validation."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Acceptance Criteria"}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"CONFIG-T01-AC01"}),": Config schema with Zod validation"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"CONFIG-T01-AC02"}),": Support JSON and YAML formats"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"CONFIG-T01-AC03"}),": Environment variable interpolation: ",(0,r.jsx)(n.code,{children:"${ENV_VAR}"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"CONFIG-T01-AC04"}),": Config file discovery:\n",(0,r.jsx)(n.code,{children:"./imessage-config.{json,yaml,yml}"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"CONFIG-T01-AC05"}),": Validation errors show field path and expected type"]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Config Structure"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:"# imessage-config.yaml\nversion: '1.0'\n\nattachmentRoots:\n  - ~/Library/Messages/Attachments\n  - /Volumes/Backup/old-attachments\n\ngemini:\n  apiKey: ${GEMINI_API_KEY}\n  model: gemini-1.5-pro\n  rateLimitDelay: 1000\n  maxRetries: 3\n\nfirecrawl:\n  apiKey: ${FIRECRAWL_API_KEY}\n  enabled: true\n\nenrichment:\n  enableVisionAnalysis: true\n  enableAudioTranscription: true\n  enableLinkEnrichment: true\n  imageCacheDir: ./.cache/images\n  checkpointInterval: 100\n  forceRefresh: false\n\nrender:\n  groupByTimeOfDay: true\n  renderRepliesAsNested: true\n  renderTapbacksAsEmoji: true\n  maxNestingDepth: 10\n"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"JSON Format"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "attachmentRoots": ["~/Library/Messages/Attachments"],\n  "gemini": {\n    "apiKey": "${GEMINI_API_KEY}",\n    "model": "gemini-1.5-pro"\n  },\n  "version": "1.0"\n}\n'})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h4,{id:"config--t02-implement-config-loader",children:"CONFIG--T02: Implement Config Loader"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Risk"}),": MEDIUM | ",(0,r.jsx)(n.strong,{children:"Estimated"}),": 2 days"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Description"}),": Create config loading with precedence and validation."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Acceptance Criteria"}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"CONFIG-T02-AC01"}),": Load config from file with YAML/JSON auto-detection"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"CONFIG-T02-AC02"}),": Merge with CLI options (CLI > config > defaults)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"CONFIG-T02-AC03"}),": Environment variable substitution with ",(0,r.jsx)(n.code,{children:"${VAR}"})," syntax"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"CONFIG-T02-AC04"}),": Config validation with helpful error messages"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"CONFIG-T02-AC05"}),": Cache loaded config to avoid repeated file reads"]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Precedence Order"})," (highest to lowest):"]}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["CLI flags (e.g., ",(0,r.jsx)(n.code,{children:"--gemini-api-key"}),")"]}),"\n",(0,r.jsxs)(n.li,{children:["Environment variables (e.g., ",(0,r.jsx)(n.code,{children:"GEMINI_API_KEY"}),")"]}),"\n",(0,r.jsxs)(n.li,{children:["Config file (e.g., ",(0,r.jsx)(n.code,{children:"imessage-config.yaml"}),")"]}),"\n",(0,r.jsx)(n.li,{children:"Built-in defaults"}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Implementation"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"// src/cli/utils/config.ts\nimport { z } from 'zod'\nimport { readFile } from 'fs/promises'\nimport yaml from 'js-yaml'\n\nconst ConfigSchema = z.object({\n  version: z.string().default('1.0'),\n  attachmentRoots: z\n    .array(z.string())\n    .default(['~/Library/Messages/Attachments']),\n  gemini: z.object({\n    apiKey: z.string(),\n    model: z.string().default('gemini-1.5-pro'),\n    rateLimitDelay: z.number().default(1000),\n    maxRetries: z.number().default(3),\n  }),\n  firecrawl: z\n    .object({\n      apiKey: z.string().optional(),\n      enabled: z.boolean().default(true),\n    })\n    .optional(),\n  enrichment: z.object({\n    enableVisionAnalysis: z.boolean().default(true),\n    enableAudioTranscription: z.boolean().default(true),\n    enableLinkEnrichment: z.boolean().default(true),\n    imageCacheDir: z.string().default('./.cache/images'),\n    checkpointInterval: z.number().default(100),\n    forceRefresh: z.boolean().default(false),\n  }),\n  render: z.object({\n    groupByTimeOfDay: z.boolean().default(true),\n    renderRepliesAsNested: z.boolean().default(true),\n    renderTapbacksAsEmoji: z.boolean().default(true),\n    maxNestingDepth: z.number().default(10),\n  }),\n})\n\nexport type Config = z.infer<typeof ConfigSchema>\n\nexport async function loadConfig(\n  configPath?: string,\n  cliOptions?: Partial<Config>,\n): Promise<Config> {\n  // 1. Load config file\n  const filePath = configPath || (await discoverConfigFile())\n  const fileConfig = filePath ? await loadConfigFile(filePath) : {}\n\n  // 2. Substitute environment variables\n  const withEnv = substituteEnvVars(fileConfig)\n\n  // 3. Merge: CLI > file > defaults\n  const merged = {\n    ...withEnv,\n    ...cliOptions,\n  }\n\n  // 4. Validate with Zod\n  return ConfigSchema.parse(merged)\n}\n\nasync function discoverConfigFile(): Promise<string | null> {\n  const candidates = [\n    './imessage-config.yaml',\n    './imessage-config.yml',\n    './imessage-config.json',\n  ]\n\n  for (const path of candidates) {\n    if (await fileExists(path)) return path\n  }\n\n  return null\n}\n\nasync function loadConfigFile(path: string): Promise<any> {\n  const content = await readFile(path, 'utf-8')\n\n  if (path.endsWith('.json')) {\n    return JSON.parse(content)\n  } else if (path.endsWith('.yaml') || path.endsWith('.yml')) {\n    return yaml.load(content)\n  }\n\n  throw new Error(`Unsupported config format: ${path}`)\n}\n\nfunction substituteEnvVars(obj: any): any {\n  if (typeof obj === 'string') {\n    return obj.replace(/\\$\\{(\\w+)\\}/g, (_, envVar) => {\n      return process.env[envVar] || ''\n    })\n  }\n\n  if (Array.isArray(obj)) {\n    return obj.map(substituteEnvVars)\n  }\n\n  if (typeof obj === 'object' && obj !== null) {\n    return Object.fromEntries(\n      Object.entries(obj).map(([k, v]) => [k, substituteEnvVars(v)]),\n    )\n  }\n\n  return obj\n}\n"})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h4,{id:"config--t03-add-config-generation-command",children:"CONFIG--T03: Add Config Generation Command"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Risk"}),": LOW | ",(0,r.jsx)(n.strong,{children:"Estimated"}),": 1 day"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Description"}),": Generate starter config files with comments."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Acceptance Criteria"}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"CONFIG-T03-AC01"}),": ",(0,r.jsx)(n.code,{children:"init"})," command to generate config file"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"CONFIG-T03-AC02"}),": Choose format: ",(0,r.jsx)(n.code,{children:"--format <json|yaml>"})," (default yaml)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"CONFIG-T03-AC03"}),": Include comments explaining each option"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"CONFIG-T03-AC04"}),": Detect existing config and prompt before overwrite"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"CONFIG-T03-AC05"}),": Validate generated config with schema"]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Command"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"imessage-timeline init [--format yaml]\n# \u2713 Created imessage-config.yaml with defaults\n# Edit this file to customize your pipeline settings\n\nimessage-timeline init --format json\n# \u2713 Created imessage-config.json\n"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Generated YAML"})," (with comments):"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:"# iMessage Pipeline Configuration\n# Version: 1.0\n\n# Attachment search paths (in order of priority)\nattachmentRoots:\n  - ~/Library/Messages/Attachments\n  - /Volumes/Backup/old-attachments\n\n# Gemini API settings (Google AI Studio)\ngemini:\n  apiKey: ${GEMINI_API_KEY} # Set GEMINI_API_KEY environment variable\n  model: gemini-1.5-pro # Model for vision/audio/PDF\n  rateLimitDelay: 1000 # Delay between API calls (ms)\n  maxRetries: 3 # Retry attempts for 5xx errors\n\n# Firecrawl API settings (optional)\nfirecrawl:\n  apiKey: ${FIRECRAWL_API_KEY}\n  enabled: true # Use Firecrawl for link enrichment\n\n# Enrichment settings\nenrichment:\n  enableVisionAnalysis: true\n  enableAudioTranscription: true\n  enableLinkEnrichment: true\n  imageCacheDir: ./.cache/images\n  checkpointInterval: 100 # Write checkpoint every N items\n  forceRefresh: false # Re-enrich existing enrichments\n\n# Rendering settings\nrender:\n  groupByTimeOfDay: true # Group by Morning/Afternoon/Evening\n  renderRepliesAsNested: true # Nested blockquotes for replies\n  renderTapbacksAsEmoji: true # Render tapbacks as emoji reactions\n  maxNestingDepth: 10 # Max reply nesting levels\n"})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"3-progress-indicators",children:"3. Progress Indicators"}),"\n",(0,r.jsx)(n.h3,{id:"31-overview",children:"3.1 Overview"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Goal"}),": Real-time terminal progress bars for long-running operations"]}),"\n",(0,r.jsx)(n.h3,{id:"32-task-breakdown",children:"3.2 Task Breakdown"}),"\n",(0,r.jsx)(n.h4,{id:"progress--t01-install-and-configure-progress-library",children:"PROGRESS--T01: Install and Configure Progress Library"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Risk"}),": LOW | ",(0,r.jsx)(n.strong,{children:"Estimated"}),": 1 day"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Description"}),": Integrate cli-progress library for progress bars."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Acceptance Criteria"}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"PROGRESS-T01-AC01"}),": Install cli-progress and @types/cli-progress"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"PROGRESS-T01-AC02"}),": Create progress utility with consistent styling"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"PROGRESS-T01-AC03"}),": Support multi-bar for concurrent operations"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"PROGRESS-T01-AC04"}),": Disable progress bars when ",(0,r.jsx)(n.code,{children:"--quiet"})," flag used"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"PROGRESS-T01-AC05"}),": Proper cleanup on Ctrl+C (clear progress bars)"]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Progress Bar Styles"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"Enriching images: [========    ] 75% (407/542) | ETA: 3m 12s\nTranscribing audio: [=====       ] 50% (67/134) | ETA: 8m 45s\nFetching links: [==================] 100% (89/89) | Done!\n"})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h4,{id:"progress--t02-add-progress-to-enrichment",children:"PROGRESS--T02: Add Progress to Enrichment"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Risk"}),": MEDIUM | ",(0,r.jsx)(n.strong,{children:"Estimated"}),": 2 days"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Description"}),": Add progress indicators to enrich-ai stage."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Acceptance Criteria"}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"PROGRESS-T02-AC01"}),": Overall enrichment progress (total messages)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"PROGRESS-T02-AC02"}),": Per-type progress bars (images, audio, PDFs, links)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"PROGRESS-T02-AC03"}),': Show current operation: "Analyzing IMG_1234.heic..."']}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"PROGRESS-T02-AC04"}),": Update ETA based on rolling average of last 10\noperations"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"PROGRESS-T02-AC05"}),": Checkpoint writes show brief pause in progress"]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Implementation"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"// src/enrich/progress.ts\nimport cliProgress from 'cli-progress'\n\nexport class EnrichmentProgress {\n  private multibar: cliProgress.MultiBar\n  private bars: Map<string, cliProgress.SingleBar>\n\n  constructor(private quiet: boolean = false) {\n    if (quiet) return\n\n    this.multibar = new cliProgress.MultiBar(\n      {\n        format:\n          '{operation} [{bar}] {percentage}% ({value}/{total}) | ETA: {eta_formatted}',\n        barCompleteChar: '\\u2588',\n        barIncompleteChar: '\\u2591',\n        clearOnComplete: false,\n        hideCursor: true,\n      },\n      cliProgress.Presets.shades_classic,\n    )\n  }\n\n  createBar(name: string, total: number): cliProgress.SingleBar {\n    if (this.quiet) return null\n\n    const bar = this.multibar.create(total, 0, { operation: name })\n    this.bars.set(name, bar)\n    return bar\n  }\n\n  update(name: string, value: number, currentFile?: string): void {\n    if (this.quiet) return\n\n    const bar = this.bars.get(name)\n    if (bar) {\n      bar.update(value, {\n        currentFile: currentFile || '',\n      })\n    }\n  }\n\n  stop(): void {\n    if (this.quiet) return\n    this.multibar.stop()\n  }\n}\n\n// Usage in enrich-ai\nconst progress = new EnrichmentProgress(options.quiet)\nconst imageBar = progress.createBar('Enriching images', imageCount)\n\nfor (let i = 0; i < images.length; i++) {\n  const img = images[i]\n  await enrichImage(img)\n  progress.update('Enriching images', i + 1, img.filename)\n}\n\nprogress.stop()\n"})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h4,{id:"progress--t03-add-progress-to-other-stages",children:"PROGRESS--T03: Add Progress to Other Stages"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Risk"}),": LOW | ",(0,r.jsx)(n.strong,{children:"Estimated"}),": 1 day"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Description"}),": Add progress to ingest, normalize, render stages."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Acceptance Criteria"}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"PROGRESS-T03-AC01"}),': Ingest progress: "Parsing CSV rows..."']}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"PROGRESS-T03-AC02"}),': Normalize progress: "Linking replies..."']}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"PROGRESS-T03-AC03"}),': Render progress: "Rendering 2024-10-15.md..."']}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"PROGRESS-T03-AC04"}),": Spinner for indeterminate operations (DB queries)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"PROGRESS-T03-AC05"}),": Final summary always shown (even with --quiet)"]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Spinner Usage"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"import ora from 'ora'\n\nconst spinner = ora('Loading messages from database...').start()\nconst messages = await loadFromDatabase()\nspinner.succeed(`Loaded ${messages.length} messages`)\n"})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"4-incremental-mode",children:"4. Incremental Mode"}),"\n",(0,r.jsx)(n.h3,{id:"41-overview",children:"4.1 Overview"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Goal"}),": Only enrich new messages since last run (delta enrichment)"]}),"\n",(0,r.jsx)(n.h3,{id:"42-task-breakdown",children:"4.2 Task Breakdown"}),"\n",(0,r.jsx)(n.h4,{id:"incremental--t01-create-state-tracking",children:"INCREMENTAL--T01: Create State Tracking"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Risk"}),": HIGH | ",(0,r.jsx)(n.strong,{children:"Estimated"}),": 3 days"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Description"}),": Track enrichment state across runs."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Acceptance Criteria"}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"INCREMENTAL-T01-AC01"}),": State file: ",(0,r.jsx)(n.code,{children:".imessage-state.json"})," with last run\nmetadata"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"INCREMENTAL-T01-AC02"}),": Track: last enriched date, total messages, config\nhash"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"INCREMENTAL-T01-AC03"}),": Detect new messages by comparing GUIDs"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"INCREMENTAL-T01-AC04"}),": State file atomic writes (temp + rename)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"INCREMENTAL-T01-AC05"}),": ",(0,r.jsx)(n.code,{children:"--incremental"})," flag to enable delta mode"]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"State File Structure"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "configHash": "a3b5c8d0e2f4a6b8",\n  "enrichedGuids": ["abc-123", "def-456"],\n  "enrichedMessages": 823,\n  "lastEnrichedDate": "2024-12-31",\n  "lastRun": "2025-10-19T22:30:00.000Z",\n  "stats": {\n    "audioTranscription": 134,\n    "imageAnalysis": 542,\n    "linkEnrichment": 89\n  },\n  "totalMessages": 3098,\n  "version": "1.0"\n}\n'})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h4,{id:"incremental--t02-implement-delta-detection",children:"INCREMENTAL--T02: Implement Delta Detection"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Risk"}),": MEDIUM | ",(0,r.jsx)(n.strong,{children:"Estimated"}),": 2 days"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Description"}),": Compare current messages with last state to find new ones."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Acceptance Criteria"}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"INCREMENTAL-T02-AC01"}),": Load previous state from ",(0,r.jsx)(n.code,{children:".imessage-state.json"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"INCREMENTAL-T02-AC02"}),": Diff normalized messages against ",(0,r.jsx)(n.code,{children:"enrichedGuids"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"INCREMENTAL-T02-AC03"}),": Return only new GUIDs for enrichment"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"INCREMENTAL-T02-AC04"}),": Handle state file missing (treat as first run)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"INCREMENTAL-T02-AC05"}),': Log delta summary: "Found 142 new messages to\nenrich"']}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Implementation"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"// src/enrich/incremental.ts\nexport async function detectNewMessages(\n  normalizedMessages: Message[],\n  statePath: string = './.imessage-state.json',\n): Promise<Message[]> {\n  // Load previous state\n  const state = await loadState(statePath)\n\n  if (!state) {\n    // First run: enrich all messages\n    return normalizedMessages\n  }\n\n  // Find new GUIDs\n  const enrichedSet = new Set(state.enrichedGuids)\n  const newMessages = normalizedMessages.filter(\n    (msg) => !enrichedSet.has(msg.guid),\n  )\n\n  console.log(`Found ${newMessages.length} new messages to enrich`)\n  console.log(`Previously enriched: ${state.enrichedMessages}`)\n\n  return newMessages\n}\n\nexport async function updateState(\n  enrichedMessages: Message[],\n  statePath: string = './.imessage-state.json',\n): Promise<void> {\n  const state = (await loadState(statePath)) || createEmptyState()\n\n  // Update enriched GUIDs\n  const newGuids = enrichedMessages.map((m) => m.guid)\n  state.enrichedGuids = [...new Set([...state.enrichedGuids, ...newGuids])]\n\n  // Update metadata\n  state.lastRun = new Date().toISOString()\n  state.totalMessages = enrichedMessages.length\n  state.enrichedMessages = state.enrichedGuids.length\n\n  // Atomic write\n  await saveStateAtomic(statePath, state)\n}\n"})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h4,{id:"incremental--t03-add-merge-strategy",children:"INCREMENTAL--T03: Add Merge Strategy"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Risk"}),": HIGH | ",(0,r.jsx)(n.strong,{children:"Estimated"}),": 2 days"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Description"}),": Merge new enrichments with existing enriched.json."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Acceptance Criteria"}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"INCREMENTAL-T03-AC01"}),": Load existing ",(0,r.jsx)(n.code,{children:"enriched.json"})," if exists"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"INCREMENTAL-T03-AC02"}),": Merge new enrichments by GUID (new messages +\nupdates)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"INCREMENTAL-T03-AC03"}),": Preserve existing enrichments (no overwrites unless\n",(0,r.jsx)(n.code,{children:"--force-refresh"}),")"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"INCREMENTAL-T03-AC04"}),": Update statistics in state file"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"INCREMENTAL-T03-AC05"}),": Backup previous enriched.json as\n",(0,r.jsx)(n.code,{children:"enriched.json.backup"})]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Merge Logic"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"export async function mergeEnrichedMessages(\n  existingPath: string,\n  newMessages: Message[],\n): Promise<Message[]> {\n  // Load existing enriched messages\n  const existing = await loadEnrichedMessages(existingPath)\n\n  // Create GUID index\n  const existingMap = new Map(existing.map((m) => [m.guid, m]))\n\n  // Merge: new messages override existing by GUID\n  for (const newMsg of newMessages) {\n    existingMap.set(newMsg.guid, newMsg)\n  }\n\n  // Return merged array sorted by date\n  return Array.from(existingMap.values()).sort((a, b) =>\n    a.date.localeCompare(b.date),\n  )\n}\n"})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h4,{id:"incremental--t04-add-cli-integration",children:"INCREMENTAL--T04: Add CLI Integration"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Risk"}),": LOW | ",(0,r.jsx)(n.strong,{children:"Estimated"}),": 1 day"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Description"}),": Integrate incremental mode into CLI commands."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Acceptance Criteria"}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"INCREMENTAL-T04-AC01"}),": ",(0,r.jsx)(n.code,{children:"--incremental"})," flag on ",(0,r.jsx)(n.code,{children:"enrich-ai"})," command"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"INCREMENTAL-T04-AC02"}),": Auto-detect state file in current directory"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"INCREMENTAL-T04-AC03"}),": ",(0,r.jsx)(n.code,{children:"--state-file <path>"})," to override state location"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"INCREMENTAL-T04-AC04"}),": ",(0,r.jsx)(n.code,{children:"--reset-state"})," to clear state and enrich all"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"INCREMENTAL-T04-AC05"}),': Progress shows: "Enriching 142 new messages (3098\ntotal)"']}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Command Usage"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# First run: enrich all messages\nimessage-timeline enrich-ai \\\n  --input normalized.json \\\n  --output enriched.json \\\n  --incremental\n\n# Creates .imessage-state.json\n# \u2713 Enriched 823 messages\n\n# Second run: only new messages\nimessage-timeline enrich-ai \\\n  --input normalized.json \\\n  --output enriched.json \\\n  --incremental\n\n# Found 142 new messages to enrich\n# Previously enriched: 823\n# \u2713 Enriched 142 new messages (965 total)\n\n# Reset state\nimessage-timeline enrich-ai \\\n  --input normalized.json \\\n  --output enriched.json \\\n  --incremental \\\n  --reset-state\n\n# Cleared previous state\n# \u2713 Enriched 965 messages\n"})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"task-summary",children:"Task Summary"}),"\n",(0,r.jsx)(n.h3,{id:"epic-e7-production-ready-18-tasks",children:"Epic E7: Production-Ready (18 tasks)"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Task"}),(0,r.jsx)(n.th,{children:"Title"}),(0,r.jsx)(n.th,{children:"Risk"}),(0,r.jsx)(n.th,{children:"Days"}),(0,r.jsx)(n.th,{children:"Dependencies"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"CLI--T01"})}),(0,r.jsx)(n.td,{children:"Setup Commander.js Structure"}),(0,r.jsx)(n.td,{children:"LOW"}),(0,r.jsx)(n.td,{children:"1"}),(0,r.jsx)(n.td,{children:"-"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"CLI--T02"})}),(0,r.jsx)(n.td,{children:"Implement Ingest Commands"}),(0,r.jsx)(n.td,{children:"MEDIUM"}),(0,r.jsx)(n.td,{children:"2"}),(0,r.jsx)(n.td,{children:"CLI--T01"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"CLI--T03"})}),(0,r.jsx)(n.td,{children:"Implement Normalize/Enrich Commands"}),(0,r.jsx)(n.td,{children:"HIGH"}),(0,r.jsx)(n.td,{children:"3"}),(0,r.jsx)(n.td,{children:"CLI--T01"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"CLI--T04"})}),(0,r.jsx)(n.td,{children:"Implement Render Command"}),(0,r.jsx)(n.td,{children:"LOW"}),(0,r.jsx)(n.td,{children:"1"}),(0,r.jsx)(n.td,{children:"CLI--T01"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"CLI--T05"})}),(0,r.jsx)(n.td,{children:"Add Helper Commands"}),(0,r.jsx)(n.td,{children:"LOW"}),(0,r.jsx)(n.td,{children:"1"}),(0,r.jsx)(n.td,{children:"CLI--T01"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"CONFIG--T01"})}),(0,r.jsx)(n.td,{children:"Define Config Schema"}),(0,r.jsx)(n.td,{children:"LOW"}),(0,r.jsx)(n.td,{children:"1"}),(0,r.jsx)(n.td,{children:"-"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"CONFIG--T02"})}),(0,r.jsx)(n.td,{children:"Implement Config Loader"}),(0,r.jsx)(n.td,{children:"MEDIUM"}),(0,r.jsx)(n.td,{children:"2"}),(0,r.jsx)(n.td,{children:"CONFIG--T01"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"CONFIG--T03"})}),(0,r.jsx)(n.td,{children:"Add Config Generation Command"}),(0,r.jsx)(n.td,{children:"LOW"}),(0,r.jsx)(n.td,{children:"1"}),(0,r.jsx)(n.td,{children:"CONFIG--T02, CLI--T01"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"PROGRESS--T01"})}),(0,r.jsx)(n.td,{children:"Install and Configure Progress Library"}),(0,r.jsx)(n.td,{children:"LOW"}),(0,r.jsx)(n.td,{children:"1"}),(0,r.jsx)(n.td,{children:"-"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"PROGRESS--T02"})}),(0,r.jsx)(n.td,{children:"Add Progress to Enrichment"}),(0,r.jsx)(n.td,{children:"MEDIUM"}),(0,r.jsx)(n.td,{children:"2"}),(0,r.jsx)(n.td,{children:"PROGRESS--T01"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"PROGRESS--T03"})}),(0,r.jsx)(n.td,{children:"Add Progress to Other Stages"}),(0,r.jsx)(n.td,{children:"LOW"}),(0,r.jsx)(n.td,{children:"1"}),(0,r.jsx)(n.td,{children:"PROGRESS--T01"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"INCREMENTAL--T01"})}),(0,r.jsx)(n.td,{children:"Create State Tracking"}),(0,r.jsx)(n.td,{children:"HIGH"}),(0,r.jsx)(n.td,{children:"3"}),(0,r.jsx)(n.td,{children:"-"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"INCREMENTAL--T02"})}),(0,r.jsx)(n.td,{children:"Implement Delta Detection"}),(0,r.jsx)(n.td,{children:"MEDIUM"}),(0,r.jsx)(n.td,{children:"2"}),(0,r.jsx)(n.td,{children:"INCREMENTAL--T01"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"INCREMENTAL--T03"})}),(0,r.jsx)(n.td,{children:"Add Merge Strategy"}),(0,r.jsx)(n.td,{children:"HIGH"}),(0,r.jsx)(n.td,{children:"2"}),(0,r.jsx)(n.td,{children:"INCREMENTAL--T01"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"INCREMENTAL--T04"})}),(0,r.jsx)(n.td,{children:"Add CLI Integration"}),(0,r.jsx)(n.td,{children:"LOW"}),(0,r.jsx)(n.td,{children:"1"}),(0,r.jsx)(n.td,{children:"CLI--T03, INCREMENTAL--T03"})]})]})]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Total"}),": 18 tasks, 24 estimated days"]}),"\n",(0,r.jsx)(n.h3,{id:"risk-breakdown",children:"Risk Breakdown"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"HIGH"}),": 3 tasks (CLI--T03, INCREMENTAL--T01, INCREMENTAL--T03)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"MEDIUM"}),": 4 tasks (CLI--T02, CONFIG--T02, PROGRESS--T02, INCREMENTAL--T02)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"LOW"}),": 11 tasks"]}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"dependencies",children:"Dependencies"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-mermaid",children:"graph TD\n    CLI01[CLI--T01: Commander Setup]\n    CLI02[CLI--T02: Ingest Commands]\n    CLI03[CLI--T03: Normalize/Enrich]\n    CLI04[CLI--T04: Render Command]\n    CLI05[CLI--T05: Helper Commands]\n\n    CFG01[CONFIG--T01: Config Schema]\n    CFG02[CONFIG--T02: Config Loader]\n    CFG03[CONFIG--T03: Config Generator]\n\n    PRG01[PROGRESS--T01: Progress Setup]\n    PRG02[PROGRESS--T02: Enrich Progress]\n    PRG03[PROGRESS--T03: Other Progress]\n\n    INC01[INCREMENTAL--T01: State Tracking]\n    INC02[INCREMENTAL--T02: Delta Detection]\n    INC03[INCREMENTAL--T03: Merge Strategy]\n    INC04[INCREMENTAL--T04: CLI Integration]\n\n    CLI01 --\x3e CLI02\n    CLI01 --\x3e CLI03\n    CLI01 --\x3e CLI04\n    CLI01 --\x3e CLI05\n\n    CFG01 --\x3e CFG02\n    CFG02 --\x3e CFG03\n    CLI01 --\x3e CFG03\n\n    PRG01 --\x3e PRG02\n    PRG01 --\x3e PRG03\n\n    INC01 --\x3e INC02\n    INC01 --\x3e INC03\n    CLI03 --\x3e INC04\n    INC03 --\x3e INC04\n"})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"testing-strategy",children:"Testing Strategy"}),"\n",(0,r.jsx)(n.h3,{id:"unit-tests",children:"Unit Tests"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"CLI argument parsing"}),"\n",(0,r.jsx)(n.li,{children:"Config loading and validation"}),"\n",(0,r.jsx)(n.li,{children:"Environment variable substitution"}),"\n",(0,r.jsx)(n.li,{children:"State file operations"}),"\n",(0,r.jsx)(n.li,{children:"Delta detection logic"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"integration-tests",children:"Integration Tests"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"End-to-end CLI workflows"}),"\n",(0,r.jsx)(n.li,{children:"Config precedence (CLI > file > defaults)"}),"\n",(0,r.jsx)(n.li,{children:"Progress bars with mock operations"}),"\n",(0,r.jsx)(n.li,{children:"Incremental enrichment with state persistence"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"manual-testing",children:"Manual Testing"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Progress bars in real terminal"}),"\n",(0,r.jsx)(n.li,{children:"Ctrl+C handling"}),"\n",(0,r.jsx)(n.li,{children:"Error messages clarity"}),"\n",(0,r.jsx)(n.li,{children:"Help text formatting"}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"documentation-updates",children:"Documentation Updates"}),"\n",(0,r.jsx)(n.p,{children:"After implementation, update:"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Usage Guide"})," - Add CLI examples, config file reference, incremental mode"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Troubleshooting Guide"})," - Config validation errors, state file corruption"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Implementation Summary"})," - Add E7 epic completion status"]}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"future-enhancements-beyond-e7",children:"Future Enhancements (Beyond E7)"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Web UI"})," - Browser interface for message browsing"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Streaming Mode"})," - Process messages without loading all in memory"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Multi-Threading"})," - Parallel enrichment across CPU cores"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Cloud Storage"})," - S3/GCS support for large attachments"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Plugins"})," - Custom enrichment providers"]}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Document Version"}),": 1.0 ",(0,r.jsx)(n.strong,{children:"Status"}),": Awaiting approval for implementation\n",(0,r.jsx)(n.strong,{children:"Estimated Total Time"}),": 24 days (1 developer) ",(0,r.jsx)(n.strong,{children:"Recommended Approach"}),":\nImplement in order: CLI \u2192 Config \u2192 Progress \u2192 Incremental"]})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(o,{...e})}):o(e)}}}]);